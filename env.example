# Redis Configuration
# REDIS_URL ‚Äî URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è)
# REDIS_PASSWORD ‚Äî –ø–∞—Ä–æ–ª—å –¥–ª—è Redis (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=

# Cache Configuration
# CACHE_ENABLED ‚Äî –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (true|false)
CACHE_ENABLED=true

# API Configuration
# API_BASE_URL ‚Äî –±–∞–∑–æ–≤—ã–π URL RAG API (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Telegram –±–æ—Ç–æ–º –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤)
#   –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: http://localhost:9000
#   –î–ª—è production: https://your-api-domain.com
API_BASE_URL=http://localhost:9000

# Qdrant
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=
QDRANT_GRPC=false
QDRANT_HNSW_M=16
QDRANT_HNSW_EF_CONSTRUCT=200
QDRANT_HNSW_EF_SEARCH=200
QDRANT_HNSW_FULL_SCAN_THRESHOLD=10000

# BGE-M3 Embeddings Configuration
EMBEDDINGS_BACKEND=auto
EMBEDDING_DEVICE=auto
EMBEDDING_MAX_LENGTH_QUERY=512
EMBEDDING_MAX_LENGTH_DOC=2048
EMBEDDING_BATCH_SIZE=16
SPARSE_BATCH_SIZE=32
DENSE_BATCH_SIZE=16
ADAPTIVE_BATCHING=true
EMBEDDING_NORMALIZE=true
EMBEDDING_USE_COLBERT=false
EMBEDDING_USE_FP16=true

# Sparse vectors configuration (handled by BGE-M3)
USE_SPARSE=true

# LLMs
DEEPSEEK_API_URL=https://api.deepseek.com/v1/chat/completions
DEEPSEEK_API_KEY=
DEEPSEEK_MODEL=deepseek-chat   # –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –∏–º—è –º–æ–¥–µ–ª–∏ —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

YANDEX_API_URL=https://llm.api.cloud.yandex.net/v1
YANDEX_CATALOG_ID=b1gri82o59t1rin7curn
YANDEX_API_KEY=
# YANDEX_MODEL ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–æ–¥–µ–ª–∏/—Å–µ–º–µ–π—Å—Ç–≤–∞ (—É—Ç–æ—á–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ)
YANDEX_MODEL=yandexgpt
YANDEX_MAX_TOKENS=4000

# Default LLM provider (–∫–∞–∫–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
# –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: YANDEX | GPT5 | DEEPSEEK
# –ü—Ä–∏–º–µ—Ä—ã:
# DEFAULT_LLM=YANDEX   # –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å YandexGPT 5.1 Pro
# DEFAULT_LLM=GPT5     # –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GPT-5 (–Ω–∞–ø—Ä–∏–º–µ—Ä, gpt-5-mini)
# DEFAULT_LLM=DEEPSEEK # –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Deepseek
DEFAULT_LLM=YANDEX
CORE_OUTPUTS_FORMAT=markdown

# GPT-5 (–ø—Ä–∏–º–µ—Ä –¥–ª—è OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ Chat Completions)
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ OpenAI:
#   GPT5_API_URL=https://api.openai.com/v1/chat/completions
#   GPT5_MODEL=gpt-5-mini
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Azure OpenAI (–ø—Ä–∏–º–µ—Ä):
#   GPT5_API_URL=https://<resource>.openai.azure.com/openai/deployments/<deployment>/chat/completions?api-version=2024-02-01
#   GPT5_MODEL=<deployment>
GPT5_API_URL=
GPT5_API_KEY=
GPT5_MODEL=

# Telegram Bot Configuration
# TELEGRAM_BOT_TOKEN ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã Telegram –±–æ—Ç–∞)
# TELEGRAM_POLL_INTERVAL ‚Äî –ø–∞—É–∑–∞ (—Å–µ–∫) –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö long polling
# CONNECTORS_TELEGRAM_FORMAT ‚Äî —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π (HTML –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
# TELEGRAM_HTML_ALLOWLIST ‚Äî —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö HTML —Ç–µ–≥–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –ø—É—Å—Ç–æ = –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã)
#
# –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –¥–ª—è —Ä–∞–±–æ—Ç—ã –∫–Ω–æ–ø–æ–∫ –æ—Ü–µ–Ω–∫–∏ üëç/üëé –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç–∞–∫–∂–µ –≤–∫–ª—é—á–∏—Ç—å QUALITY_DB_ENABLED=true
TELEGRAM_BOT_TOKEN=
TELEGRAM_POLL_INTERVAL=1.0
CONNECTORS_TELEGRAM_FORMAT=HTML
TELEGRAM_HTML_ALLOWLIST=

# Retrieval config
# –í–µ—Å–æ–≤–∞—è —Å—Ö–µ–º–∞ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ (RRF):
#   HYBRID_DENSE_WEIGHT ‚Äî –≤–∫–ª–∞–¥ dense
#   HYBRID_SPARSE_WEIGHT ‚Äî –≤–∫–ª–∞–¥ sparse
#   RRF_K ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä RRF
#   RERANK_TOP_N ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ç–æ–ø –ø–æ—Å–ª–µ —Ä–µ—Ä–∞–Ω–∫–∞
HYBRID_DENSE_WEIGHT=0.5
HYBRID_SPARSE_WEIGHT=0.5
RERANK_TOP_N=10
RRF_K=60

# Reranker (BGE-reranker-v2-m3 –Ω–∞ GPU)
# RERANKER_MODEL ‚Äî –∏–º—è –º–æ–¥–µ–ª–∏ –≤ HuggingFace/FlagEmbedding
# RERANKER_DEVICE ‚Äî cuda –¥–ª—è GPU, cpu –¥–ª—è CPU
# RERANKER_THREADS ‚Äî —á–∏—Å–ª–æ CPU-–ø–æ—Ç–æ–∫–æ–≤ (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ GPU)
RERANKER_MODEL=BAAI/bge-reranker-v2-m3
RERANKER_DEVICE=cuda
RERANKER_THREADS=12

# Auto-Merge Configuration
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–æ—Å–µ–¥–Ω–∏—Ö —á–∞–Ω–∫–æ–≤ –æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ rerank
# –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è LLM –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö token budget
# RETRIEVAL_AUTO_MERGE_ENABLED ‚Äî –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ-—Å–ª–∏—è–Ω–∏–µ (true|false)
# RETRIEVAL_AUTO_MERGE_MAX_TOKENS ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤ —Ç–æ–∫–µ–Ω–∞—Ö
#   –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 1200-2000 –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –º–µ–Ω—å—à–µ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
# RETRIEVAL_AUTO_MERGE_USE_TIKTOKEN ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tiktoken –¥–ª—è —Ç–æ—á–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ (true|false)
#   –ü—Ä–∏ false –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±—ã—Å—Ç—Ä—É—é —ç–≤—Ä–∏—Å—Ç–∏–∫—É len//4
#   –í–ê–ñ–ù–û: —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ tiktoken (pip install tiktoken==0.8.0)
# RETRIEVAL_CACHE_MAXSIZE ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∫–µ—à–µ
# RETRIEVAL_CACHE_TTL ‚Äî –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫–µ—à–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
#   –í–ê–ñ–ù–û: TTL —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω cachetools (pip install cachetools==5.5.0)
RETRIEVAL_AUTO_MERGE_ENABLED=true
RETRIEVAL_AUTO_MERGE_MAX_TOKENS=1200
RETRIEVAL_AUTO_MERGE_USE_TIKTOKEN=false
RETRIEVAL_CACHE_MAXSIZE=1000
RETRIEVAL_CACHE_TTL=300

# Qdrant Scroll Configuration
# QDRANT_SCROLL_BATCH_SIZE ‚Äî —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –ø—Ä–∏ scroll-–∑–∞–ø—Ä–æ—Å–∞—Ö (–ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —á–∞–Ω–∫–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞)
QDRANT_SCROLL_BATCH_SIZE=64

# GPU Configuration (–¥–ª—è AMD Radeon RX 6700 XT)
# GPU_ENABLED ‚Äî –≤–∫–ª—é—á–∏—Ç—å GPU-—É—Å–∫–æ—Ä–µ–Ω–∏–µ
# GPU_DEVICE ‚Äî –Ω–æ–º–µ—Ä GPU —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (0 –¥–ª—è –ø–µ—Ä–≤–æ–π –∫–∞—Ä—Ç—ã)
# GPU_MEMORY_FRACTION ‚Äî –¥–æ–ª—è –ø–∞–º—è—Ç–∏ GPU –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (0.0-1.0)
GPU_ENABLED=true
GPU_DEVICE=0
GPU_MEMORY_FRACTION=0.8

# ONNX Runtime provider selection for embeddings/reranker (Windows/DirectML)
# –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
#   auto ‚Äî –ø—Ä–µ–¥–ø–æ—á–µ—Å—Ç—å DmlExecutionProvider, –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —É–ø–∞—Å—Ç—å –Ω–∞ CPU
#   dml  ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DmlExecutionProvider (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
#   cpu  ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ CPUExecutionProvider
ONNX_PROVIDER=auto

# ===== –ü–ï–†–ï–ò–ù–î–ï–ö–°–ê–¶–ò–Ø =====
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Å BGE-M3

# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è AMD RX 6700 XT (Windows)
# EMBEDDINGS_BACKEND=hybrid
# EMBEDDING_BATCH_SIZE=32
# EMBEDDING_USE_FP16=true

# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è NVIDIA GPU (Linux/Windows)
# EMBEDDINGS_BACKEND=bge
# EMBEDDING_BATCH_SIZE=16
# EMBEDDING_USE_FP16=true

# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è CPU only
# EMBEDDINGS_BACKEND=onnx
# EMBEDDING_BATCH_SIZE=8
# EMBEDDING_USE_FP16=false

# –ö–æ–º–∞–Ω–¥—ã –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏:
# python scripts/reindex.py --sparse                    # –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±
# python scripts/reindex.py --sparse --backend=hybrid   # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ hybrid
# python scripts/reindex.py --sparse --batch-size=32    # –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –±–∞—Ç—á –¥–ª—è GPU
# python -m ingestion.pipeline                          # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±

# Ingestion
# CRAWL_START_URL ‚Äî –∫–æ—Ä–Ω–µ–≤–æ–π URL –ø–æ—Ä—Ç–∞–ª–∞
CRAWL_START_URL=https://docs-chatcenter.edna.ru/
CRAWL_CONCURRENCY=8
CRAWL_TIMEOUT_S=30
CRAWL_MAX_PAGES=0
CRAWL_DELAY_MS=800
CRAWL_JITTER_MS=400
# –ö–æ–º–º–∞-—Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã URL, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –æ–±—Ö–æ–¥–∏—Ç—å (deny-list)
# CRAWL_DENY_PREFIXES=/docs/api/

# Enhanced Chunker Configuration
SEMANTIC_CHUNKER_MODEL=sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
SEMANTIC_CHUNKER_THRESHOLD=0.7
SEMANTIC_CHUNKER_OVERLAP_SIZE=50

# Enhanced Crawler Configuration
CRAWLER_STRATEGY=jina
CRAWLER_MAX_RETRIES=3
CRAWLER_BACKOFF_FACTOR=1.5
CRAWLER_RATE_LIMIT_RPS=2.0
CRAWLER_RATE_LIMIT_BURST=5
MAX_CRAWL_DURATION_MINUTES=60

# Chunk Validation Settings (–≤–∞–ª–∏–¥–∞—Ü–∏—è —á–∞–Ω–∫–æ–≤ –ø—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏)
# MIN_CHUNK_WORDS ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ –≤ —á–∞–Ω–∫–µ
# MAX_PARAGRAPH_TOKENS ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–µ
# DEDUPLICATION_ENABLED ‚Äî –≤–∫–ª—é—á–∏—Ç—å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é —á–∞–Ω–∫–æ–≤ (true|false)
#
# –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —ç—Ç–æ –ù–ï —Å–≤—è–∑–∞–Ω–æ —Å —Å–∏—Å—Ç–µ–º–æ–π –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (Quality System)
MIN_CHUNK_WORDS=5
MAX_PARAGRAPH_TOKENS=1000
DEDUPLICATION_ENABLED=true

# Security and Limits
MAX_PAGE_SIZE_MB=10
MAX_TOTAL_PAGES=10000
MAX_MEMORY_USAGE_MB=2048

# Chunking parameters (optimized for BGE-M3)
# –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ BGE-M3: 512 —Ç–æ–∫–µ–Ω–æ–≤ ¬±20% (410-614)
CHUNK_MIN_TOKENS=410
CHUNK_MAX_TOKENS=614
EMBEDDING_DIM=1024
QDRANT_COLLECTION=chatcenter_docs

# Chunking Strategy
# CHUNK_STRATEGY: simple | adaptive
CHUNK_STRATEGY=adaptive

# Adaptive Chunker Parameters
# –ü–æ—Ä–æ–≥–∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –ø–æ –¥–ª–∏–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–≤ —Å–ª–æ–≤–∞—Ö): short/long
ADAPTIVE_SHORT_THRESHOLD=300
ADAPTIVE_LONG_THRESHOLD=1000
# –†–∞–∑–º–µ—Ä—ã –∏ overlap
ADAPTIVE_MEDIUM_SIZE=512
ADAPTIVE_MEDIUM_OVERLAP=100
ADAPTIVE_LONG_SIZE=800
ADAPTIVE_LONG_OVERLAP=160
# –û–±—ä–µ–¥–∏–Ω—è—Ç—å –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã –∫–æ—Ä–æ—á–µ N —Ç–æ–∫–µ–Ω–æ–≤
ADAPTIVE_MERGE_SHORT_PARAGRAPH_TOKENS=50

# ===== –°–ò–°–¢–ï–ú–ê –û–¶–ï–ù–ö–ò –ö–ê–ß–ï–°–¢–í–ê =====
# –°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
# 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ (Feedback) - –∫–Ω–æ–ø–∫–∏ üëç/üëé –≤ Telegram
# 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ (RAGAS) - ML-–æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤
#
# –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:
# - –¢–æ–ª—å–∫–æ Feedback: QUALITY_DB_ENABLED=true, ENABLE_RAGAS_EVALUATION=false
# - –ü–æ–ª–Ω–∞—è –æ—Ü–µ–Ω–∫–∞: QUALITY_DB_ENABLED=true, ENABLE_RAGAS_EVALUATION=true
# - –û—Ç–∫–ª—é—á–µ–Ω–æ: QUALITY_DB_ENABLED=false, ENABLE_RAGAS_EVALUATION=false

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –ë–ê–ó–ê –î–ê–ù–ù–´–• –ö–ê–ß–ï–°–¢–í–ê (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã feedback)
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# QUALITY_DB_ENABLED ‚Äî –≤–∫–ª—é—á–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∫–∞—á–µ—Å—Ç–≤–∞
#   true  ‚Äî –∫–Ω–æ–ø–∫–∏ üëç/üëé –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ Telegram
#   false ‚Äî –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞
# DATABASE_URL ‚Äî URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
#   SQLite: sqlite:///data/quality_interactions.db (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
#   PostgreSQL: postgresql://user:pass@localhost/dbname
QUALITY_DB_ENABLED=true
DATABASE_URL=sqlite:///data/quality_interactions.db

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# RAGAS –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –û–¶–ï–ù–ö–ê (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# ENABLE_RAGAS_EVALUATION ‚Äî –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é ML-–æ—Ü–µ–Ω–∫—É –∫–∞—á–µ—Å—Ç–≤–∞
#   true  ‚Äî –∑–∞–ø—É—Å–∫–∞—Ç—å RAGAS –æ—Ü–µ–Ω–∫—É –≤ —Ñ–æ–Ω–µ (—Ç—Ä–µ–±—É–µ—Ç QUALITY_DB_ENABLED=true)
#   false ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π feedback
# RAGAS_EVALUATION_SAMPLE_RATE ‚Äî –¥–æ–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ (0.0-1.0)
#   0.1 = –æ—Ü–µ–Ω–∏–≤–∞—Ç—å 10% –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)
#   1.0 = –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã (–≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞)
# RAGAS_BATCH_SIZE ‚Äî —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
# RAGAS_ASYNC_TIMEOUT ‚Äî —Ç–∞–π–º–∞—É—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
ENABLE_RAGAS_EVALUATION=false
RAGAS_EVALUATION_SAMPLE_RATE=0.1
RAGAS_BATCH_SIZE=10
RAGAS_ASYNC_TIMEOUT=30

# RAGAS LLM Backend Selection
# –í—ã–±–µ—Ä–∏—Ç–µ, –∫–∞–∫–æ–π LLM –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è RAGAS –æ—Ü–µ–Ω–∫–∏:
# - yandexgpt (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç YANDEX_API_KEY)
# - deepseek (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç DEEPSEEK_API_KEY, OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π)
# - openai (—Ç—Ä–µ–±—É–µ—Ç OPENAI_API_KEY)
# - gpt5 (—Ç—Ä–µ–±—É–µ—Ç GPT5_API_KEY)
RAGAS_LLM_BACKEND=yandexgpt

# OpenAI Configuration (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è RAGAS)
# OPENAI_API_KEY=sk-...
# OPENAI_MODEL=gpt-4o-mini

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –ú–ï–¢–†–ò–ö–ò –ö–ê–ß–ï–°–¢–í–ê (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# ENABLE_QUALITY_METRICS ‚Äî –≤–∫–ª—é—á–∏—Ç—å Prometheus –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
#   true  ‚Äî —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ /metrics
#   false ‚Äî –º–µ—Ç—Ä–∏–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã
# QUALITY_PREDICTION_THRESHOLD ‚Äî –ø–æ—Ä–æ–≥ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π (0.0-1.0)
ENABLE_QUALITY_METRICS=true
QUALITY_PREDICTION_THRESHOLD=0.7

# Theme Router
# –†–µ–∂–∏–º —Ä–æ—É—Ç–µ—Ä–∞: none | heuristic | llm
THEME_ROUTER_MODE=heuristic

# Query Logging
QUERY_LOG_ENABLED=true
QUERY_LOG_DIR=logs
QUERY_LOG_MAX_CANDIDATES=20
QUERY_LOG_TEXT_PREFIX_LEN=300
