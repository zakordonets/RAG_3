# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞–≤—Ç–æ—Ç–µ—Å—Ç–∞–º

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤ –¥–ª—è end-to-end –ø—Ä–æ–≤–µ—Ä–∫–∏ pipeline –æ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–æ –∑–∞–ø–∏—Å–∏ –≤ Qdrant. –¢–µ—Å—Ç—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –∏ —É–ø—Ä–æ—â–∞—é—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make dev-setup

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
pip install -r requirements.txt
pip install -r requirements-dev.txt
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
make test-fast

# –í—Å–µ —Ç–µ—Å—Ç—ã
make test

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø —Ç–µ—Å—Ç–æ–≤
make test-unit        # Unit —Ç–µ—Å—Ç—ã
make test-integration # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
make test-e2e         # End-to-end —Ç–µ—Å—Ç—ã
make test-slow        # –ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```

### –ü—Ä–æ—Ñ–∏–ª–∏ –∑–∞–ø—É—Å–∫–∞

| –ü—Ä–æ—Ñ–∏–ª—å | –ö–æ–º–∞–Ω–¥–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- | --- |
| `fast` | `make test-fast` | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ unit —Ç–µ—Å—Ç–æ–≤ –±–µ–∑ `slow`, –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. |
| `ci-unit` | `make ci-test` | –¢–æ –∂–µ, —á—Ç–æ GitHub Actions `unit` job: xdist + HTML/JSON –æ—Ç—á–µ—Ç—ã, –ø–æ—Ä–æ–≥ –ø–æ–∫—Ä—ã—Ç–∏—è 70‚ÄØ%. |
| `ci-full` | `make ci-test-all` | –ü–æ–ª–Ω—ã–π –ø—Ä–æ–≥–æ–Ω —Å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–µ–π, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –Ω–æ—á–Ω—ã—Ö/—Ä—É—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫. |
| `coverage` | `make coverage-extended` | –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è (`--cov-fail-under=70`) + `coverage.xml/htmlcov`. |
| `property` | `python -m pytest tests/property --maxfail=1 --hypothesis-profile=ci` | Property-based —Ç–µ—Å—Ç—ã –Ω–∞ Hypothesis. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `HYPOTHESIS_PROFILE=ci` –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º–∞. |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

### –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

#### Unit —Ç–µ—Å—Ç—ã
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `tests/test_*.py`
- **–¶–µ–ª—å**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –∫–ª–∞—Å—Å–æ–≤
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: < 1 —Å–µ–∫—É–Ω–¥—ã
- **–ü—Ä–∏–º–µ—Ä—ã**: –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö, —É—Ç–∏–ª–∏—Ç—ã

#### Integration —Ç–µ—Å—Ç—ã
- **–ú–∞—Ä–∫–µ—Ä**: `@pytest.mark.integration`
- **–¶–µ–ª—å**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: 1-10 —Å–µ–∫—É–Ω–¥
- **–ü—Ä–∏–º–µ—Ä—ã**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis, —Ä–∞–±–æ—Ç–∞ —Å Qdrant, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM

#### End-to-End —Ç–µ—Å—Ç—ã
- **–ú–∞—Ä–∫–µ—Ä**: `@pytest.mark.e2e`
- **–¶–µ–ª—å**: –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ pipeline
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: 10-60 —Å–µ–∫—É–Ω–¥
- **–ü—Ä–∏–º–µ—Ä—ã**: –ü–æ–ª–Ω—ã–π RAG pipeline, –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è ‚Üí –ø–æ–∏—Å–∫ ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞

#### –ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- **–ú–∞—Ä–∫–µ—Ä**: `@pytest.mark.slow`
- **–¶–µ–ª—å**: –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ª–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: > 60 —Å–µ–∫—É–Ω–¥
- **–ü—Ä–∏–º–µ—Ä—ã**: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è, –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã

#### Property-based —Ç–µ—Å—Ç—ã
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `tests/property/`
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**: [Hypothesis](https://hypothesis.readthedocs.io)
- **–¶–µ–ª—å**: –ì–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (whitelist —Å—Å—ã–ª–æ–∫, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —á–∞–Ω–∫–∏–Ω–≥–∞)
- **–ó–∞–ø—É—Å–∫**: `python -m pytest tests/property --hypothesis-profile=ci`
- **–°–æ–≤–µ—Ç—ã**: –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `HYPOTHESIS_PROFILE=ci` –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç–∏; —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ `--maxfail` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–µ.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
tests/
‚îú‚îÄ‚îÄ conftest.py                              # –§–∏–∫—Å—Ç—É—Ä—ã pytest
‚îÇ
‚îú‚îÄ‚îÄ fixtures/                                # –û–±—â–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ data_samples.py                      # –õ–∏—Ç–µ—Ä–∞–ª—ã markdown/URL/—á–∞–Ω–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ factories.py                         # –§–∞–±—Ä–∏–∫–∏ payload –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä
‚îÇ
‚îú‚îÄ‚îÄ Core —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_unified_pipeline.py             # –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π pipeline
‚îÇ   ‚îú‚îÄ‚îÄ test_unified_indexing.py             # –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ test_unified_integration.py          # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_rag_system_comprehensive.py     # –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ RAG —Ç–µ—Å—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ Quality —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_ragas_quality.py                # RAGAS –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ test_integration_phase2.py           # Phase 2 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ test_monitoring_quality.py           # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ test_indexing_quality.py             # –ö–∞—á–µ—Å—Ç–≤–æ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ Retrieval —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_retrieval_auto_merge.py         # Auto-merge —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ test_retrieval_auto_merge_extended.py # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã auto-merge
‚îÇ
‚îú‚îÄ‚îÄ Data loading —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_universal_loader.py             # –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ test_docusaurus_crawler.py           # Docusaurus crawler
‚îÇ   ‚îú‚îÄ‚îÄ test_docusaurus_utils.py             # –£—Ç–∏–ª–∏—Ç—ã Docusaurus
‚îÇ
‚îú‚îÄ‚îÄ Chunking —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_adaptive_chunker.py             # –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π chunking
‚îÇ   ‚îú‚îÄ‚îÄ test_universal_chunker_v2.py         # –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π chunker v2
‚îÇ
‚îú‚îÄ‚îÄ Integration —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_qdrant_integration.py           # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Qdrant
‚îÇ   ‚îú‚îÄ‚îÄ test_unified_adapters.py             # –ê–¥–∞–ø—Ç–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_unified_contracts.py            # –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_unified_tokenizer.py            # –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ Utility —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_utils.py                        # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_links.py                        # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Å—ã–ª–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ test_pathing.py                      # –†–∞–±–æ—Ç–∞ —Å –ø—É—Ç—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_clean.py                        # –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ test_short_pages_fixes.py            # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
‚îÇ   ‚îú‚îÄ‚îÄ test_updated_config.py               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ
‚îî‚îÄ‚îÄ services/                                # –¢–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
    ‚îú‚îÄ‚îÄ test_context_optimizer.py            # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    ‚îú‚îÄ‚îÄ test_llm_router.py                   # LLM —Ä–æ—É—Ç–µ—Ä
    ‚îî‚îÄ‚îÄ test_telegram_adapter.py             # Telegram –∞–¥–∞–ø—Ç–µ—Ä

scripts/
‚îú‚îÄ‚îÄ run_tests.py                             # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ init_qdrant.py                           # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Qdrant
‚îú‚îÄ‚îÄ init_quality_db.py                       # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î –∫–∞—á–µ—Å—Ç–≤–∞
‚îú‚îÄ‚îÄ clear_collection.py                      # –û—á–∏—Å—Ç–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ recreate_collection_with_sparse.py       # –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Å sparse
‚îú‚îÄ‚îÄ reindex_instructions.py                  # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
‚îÇ
‚îî‚îÄ‚îÄ –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã
    ‚îú‚îÄ‚îÄ check_canonical_url.py               # –ü—Ä–æ–≤–µ—Ä–∫–∞ canonical URL
    ‚îú‚îÄ‚îÄ check_file_indexed.py                # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞
    ‚îú‚îÄ‚îÄ check_full_text.py                   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
    ‚îú‚îÄ‚îÄ check_start_urls.py                  # –ü—Ä–æ–≤–µ—Ä–∫–∞ start URLs
    ‚îú‚îÄ‚îÄ check_text_field.py                  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π
    ‚îú‚îÄ‚îÄ deep_analysis.py                     # –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑
    ‚îî‚îÄ‚îÄ test_retrieval_for_url.py            # –¢–µ—Å—Ç –ø–æ–∏—Å–∫–∞ –ø–æ URL

pytest.ini                                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
Makefile                                     # –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
requirements-dev.txt                         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã

### 1. Unified Pipeline Tests

**–§–∞–π–ª**: `tests/test_unified_pipeline.py`

**–ü–æ–∫—Ä—ã–≤–∞–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**:
- –ü–æ–ª–Ω—ã–π —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π pipeline –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DAG –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 2. RAG System Comprehensive Tests

**–§–∞–π–ª**: `tests/test_rag_system_comprehensive.py`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ RAG —Å–∏—Å—Ç–µ–º—ã
- End-to-end —Ç–µ—Å—Ç—ã: –∑–∞–ø—Ä–æ—Å ‚Üí –ø–æ–∏—Å–∫ ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Üí –æ—Ç–≤–µ—Ç
- –ü—Ä–æ–≤–µ—Ä–∫–∞ quality system (RAGAS –º–µ—Ç—Ä–∏–∫–∏)
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 3. RAGAS Quality Tests

**–§–∞–π–ª**: `tests/test_ragas_quality.py`

**–ü–æ–∫—Ä—ã–≤–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:
- **Faithfulness**: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç–≤–µ—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- **Answer Relevancy**: –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ –∑–∞–ø—Ä–æ—Å—É
- **Context Precision**: –¢–æ—á–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ë–î –∫–∞—á–µ—Å—Ç–≤–∞
- –ê–Ω–∞–ª–∏–∑ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Ñ–∏–¥–±–µ–∫–æ–º

### 4. Auto-Merge Retrieval Tests

**–§–∞–π–ª—ã**:
- `tests/test_retrieval_auto_merge.py`
- `tests/test_retrieval_auto_merge_extended.py`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ Auto-Merge —Å–æ—Å–µ–¥–Ω–∏—Ö —á–∞–Ω–∫–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –±–∞–∑–æ–≤—ã–º –ø–æ–∏—Å–∫–æ–º

### 5. Integration Tests

**–§–∞–π–ª**: `tests/test_integration_phase2.py`

**–ü–æ–∫—Ä—ã–≤–∞–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Phase 2
- Circuit Breakers –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis + in-memory)
- Rate limiting –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏ Prometheus

### 6. Services Tests

**–§–∞–π–ª—ã –≤** `tests/services/`:
- **test_context_optimizer.py**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
- **test_llm_router.py**: –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è LLM —Å fallback
- **test_telegram_adapter.py**: Telegram bot –∞–¥–∞–ø—Ç–µ—Ä

### 7. Unified Indexing Tests

**–§–∞–π–ª**: `tests/test_unified_indexing.py`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –µ–¥–∏–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ Qdrant —Å sparse –≤–µ–∫—Ç–æ—Ä–∞–º–∏

## –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Makefile –∫–æ–º–∞–Ω–¥—ã

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make test              # –í—Å–µ —Ç–µ—Å—Ç—ã
make test-unit         # Unit —Ç–µ—Å—Ç—ã
make test-integration  # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
make test-e2e          # End-to-end —Ç–µ—Å—Ç—ã
make test-slow         # –ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
make test-fast         # –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã (–±–µ–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö)
make test-pipeline     # –¢–µ—Å—Ç—ã unified pipeline
make test-quality      # –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∫–∞—á–µ—Å—Ç–≤–∞

# –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
make lint              # –õ–∏–Ω—Ç–∏–Ω–≥ (flake8, mypy)
make format            # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (black, isort)

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
make dev-setup         # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make install           # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make clean             # –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
make check-services    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ (Redis, Qdrant)

# –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è
make reindex           # –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —á–µ—Ä–µ–∑ ingestion pipeline
make reindex-incremental # –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è

# –û—Ç–ª–∞–¥–∫–∞
make debug-collection  # –û—Ç–ª–∞–¥–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ Qdrant
make debug-pipeline    # –û—Ç–ª–∞–¥–∫–∞ unified pipeline
make debug-retrieval   # –û—Ç–ª–∞–¥–∫–∞ –ø–æ–∏—Å–∫–∞ –ø–æ URL
```

### –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

```bash
# –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
python scripts/run_tests.py --type unit --verbose
python scripts/run_tests.py --type integration
python scripts/run_tests.py --type e2e

# –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
python scripts/run_tests.py --type fast --coverage
python scripts/run_tests.py --type unit --parallel
python scripts/run_tests.py --type fast --check-services

# –ü–æ–º–æ—â—å
python scripts/run_tests.py --help
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

### 1. –°–æ–∑–¥–∞–Ω–∏–µ unit —Ç–µ—Å—Ç–∞

```python
# tests/test_new_feature.py
import pytest
from app.services.new_service import NewService

class TestNewFeature:
    def test_basic_functionality(self):
        """–¢–µ—Å—Ç –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏"""
        service = NewService()
        result = service.process("test_input")
        assert result == "expected_output"

    def test_error_handling(self):
        """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫"""
        service = NewService()
        with pytest.raises(ValueError):
            service.process("invalid_input")
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```python
# tests/test_integration.py
import pytest
from app.services.integration_service import IntegrationService

class TestIntegration:
    @pytest.mark.integration
    def test_redis_integration(self):
        """–¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Redis"""
        service = IntegrationService()
        result = service.cache_data("key", "value")
        assert service.get_cached_data("key") == "value"

    @pytest.mark.integration
    def test_qdrant_integration(self):
        """–¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Qdrant"""
        service = IntegrationService()
        # –¢–µ—Å—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Qdrant
        pass
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ end-to-end —Ç–µ—Å—Ç–∞

```python
# tests/test_e2e_custom.py
import pytest
from app.services.infrastructure.orchestrator import handle_query

class TestE2ECustom:
    @pytest.mark.e2e
    def test_full_rag_pipeline(self):
        """–ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç RAG pipeline"""
        # –¢–µ—Å—Ç –æ—Ç –∑–∞–ø—Ä–æ—Å–∞ –¥–æ –æ—Ç–≤–µ—Ç–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∫–∞—á–µ—Å—Ç–≤–∞
        response = handle_query(
            channel="api",
            chat_id="test_user",
            message="–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é?"
        )

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞
        assert "answer_markdown" in response
        assert response["answer_markdown"] is not None
        assert len(response["sources"]) > 0
        assert "interaction_id" in response

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
        assert "processing_time" in response
        assert response["processing_time"] > 0
```

### 4. –ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤

```python
import pytest

class TestExamples:
    @pytest.mark.slow
    def test_performance(self):
        """–ú–µ–¥–ª–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"""
        # –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        pass

    @pytest.mark.integration
    def test_external_service(self):
        """–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç"""
        # –¢–µ—Å—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
        pass

    @pytest.mark.e2e
    def test_full_workflow(self):
        """End-to-end —Ç–µ—Å—Ç"""
        # –ü–æ–ª–Ω—ã–π workflow
        pass
```

## CI/CD Pipeline

### GitHub Actions

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏:
- Push –≤ –≤–µ—Ç–∫–∏ `main`, `develop`
- –°–æ–∑–¥–∞–Ω–∏–∏ Pull Request

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `.github/workflows/ci.yml`

**–≠—Ç–∞–ø—ã**:
1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
2. **–õ–∏–Ω—Ç–∏–Ω–≥ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤**
3. **Unit —Ç–µ—Å—Ç—ã**
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**
5. **–ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** (—Ç–æ–ª—å–∫–æ –Ω–∞ main)
6. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏**

### –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ CI

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–∏–Ω–≥–∞
make lint

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
python -m mypy app/

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∫–∞–∫ –≤ CI
make ci-test

# –í—Å–µ —Ç–µ—Å—Ç—ã –∫–∞–∫ –≤ CI
make ci-test-all
```

## –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Å—Ç–∞–º–∏

#### 1. –¢–µ—Å—Ç—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ pytest
python -m pytest --version

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python -m pytest --collect-only
```

#### 2. –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ PYTHONPATH
export PYTHONPATH=$PWD:$PYTHONPATH

# –ò–ª–∏ –≤ Windows
set PYTHONPATH=%CD%;%PYTHONPATH%
```

#### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
make check-services

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
python scripts/run_tests.py --type unit --no-check-services
```

### –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
python scripts/run_tests.py --type unit --verbose

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
python -m pytest tests/ -x

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
python -m pytest tests/test_unified_pipeline.py::TestUnifiedPipeline::test_full_pipeline -v

# –ó–∞–ø—É—Å–∫ —Å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
python -m pytest tests/ -s -v

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ Qdrant
python scripts/check_file_indexed.py

# –¢–µ—Å—Ç –ø–æ–∏—Å–∫–∞ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É URL
python scripts/test_retrieval_for_url.py
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤
- –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤ –∫–ª–∞—Å—Å—ã
- –î–æ–±–∞–≤–ª—è–π—Ç–µ docstrings –¥–ª—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
- –ü–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `tests.fixtures.data_samples` –∏ `tests.fixtures.factories`, —á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å markdown/URL/—á–∞–Ω–∫–∏

### 2. –ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä–∫–µ—Ä—ã (@pytest.mark.slow, @pytest.mark.integration)
- –ù–µ –ø–æ–º–µ—á–∞–π—Ç–µ unit —Ç–µ—Å—Ç—ã –∫–∞–∫ –º–µ–¥–ª–µ–Ω–Ω—ã–µ
- –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç—ã –ø–æ —Ç–∏–ø—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

### 3. –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –í—Å–µ–≥–¥–∞ –æ—á–∏—â–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ù–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

### 4. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- Unit —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ (< 1 —Å–µ–∫)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ unit —Ç–µ—Å—Ç–∞—Ö
- –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –æ—Ç–¥–µ–ª—å–Ω–æ

### 5. –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- –¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ —Ñ–∏–∫—Å–∞—Ü–∏–∏ seed
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–∞–∫ —É—Å–ø–µ—à–Ω—ã–µ, —Ç–∞–∫ –∏ –Ω–µ—É—Å–ø–µ—à–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç—á–µ—Ç—ã

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
make test-coverage

# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–∞
open htmlcov/index.html
```

- –õ–æ–∫–∞–ª—å–Ω–æ `make coverage-extended` –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ø–æ—Ä–æ–≥ `--cov-fail-under=70` –¥–ª—è `app`, `ingestion`, `adapters`.
- GitHub Actions `unit` job —Ç–∞–∫–∂–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–∫—Ä—ã—Ç–∏–∏ < 70‚ÄØ% –∏ –≤—ã–≥—Ä—É–∂–∞–µ—Ç `coverage.xml`/`htmlcov`.
- –î–ª—è —Ä–µ–ª–∏–∑–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `python -m pytest tests/ --cov=app --cov=ingestion --cov=adapters --cov-report=xml --cov-fail-under=80`.

### –õ–æ–≥–∏ —Ç–µ—Å—Ç–æ–≤
```bash
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤
python scripts/run_tests.py --type fast > test_results.log 2>&1

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
python scripts/run_tests.py --type fast --verbose | tee test_results.log
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤
```bash
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ
make info

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤
python -m pytest --collect-only -q
```

### CI –æ—Ç—á–µ—Ç—ã
- `unit` job (GitHub Actions) –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç `report.html`, `report.json`, `htmlcov/`, `coverage.xml` –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ –≤ Codecov.
- `integration` –∏ `slow` job –≤—ã–≥—Ä—É–∂–∞—é—Ç `report.html`/`report.json` –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.
- –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è 7 –¥–Ω–µ–π; –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –¥–ª—è —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤ –æ—Ç–ª–∞–¥–æ–∫ –∏ —Å–≤–µ—Ä–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏ –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏
- **–ë—ã—Å—Ç—Ä–æ—Ç—É**: Unit —Ç–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞ 30 —Å–µ–∫—É–Ω–¥
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é**: CI/CD pipeline –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **–£–¥–æ–±—Å—Ç–≤–æ**: –ü—Ä–æ—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–º.:
- üìñ [Architecture Overview](architecture.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- üìã [Technical Specification](technical_specification.md) - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
- üõ†Ô∏è [Development Guide](development_guide.md) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
- üîß [Internal API](internal_api.md) - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –∏ API
- üìù [API Reference](api_reference.md) - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—É–±–ª–∏—á–Ω–æ–≥–æ API
- üìö [README.md](../README.md) - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### v4.3.0 (–û–∫—Ç—è–±—Ä—å 2025)
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ pipeline —Ç–µ—Å—Ç–∞–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã RAGAS quality system
- ‚úÖ –¢–µ—Å—Ç—ã Auto-Merge —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã RAG —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (Context Optimizer, LLM Router, etc.)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤ –ø–æ–¥ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

### v4.2.0
- –¢–µ—Å—Ç—ã –¥–ª—è –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ (dense + sparse)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å Qdrant
- –¢–µ—Å—Ç—ã Circuit Breakers

### v4.1.0
- –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤
- Unit –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- CI/CD pipeline
