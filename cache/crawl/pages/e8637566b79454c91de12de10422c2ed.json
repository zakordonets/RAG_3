{
  "html": "Title: Добавление кнопок в АРМ агента | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons\n\nMarkdown Content:\nДобавление кнопок в АРМ агента\n------------------------------\n\nОбновлено:\n\n18 сентября 2025\n\nВ АРМ агента можно добавить дополнительные кнопки двух типов:\n\n*   Кнопка для перехода по ссылке в профиле клиента. Например, можно использовать, чтобы из АРМ агента перейти в карточку клиента из CRM-системы заказчика.\n*   Кнопка для формирования ссылки в области поля ввода сообщения. Например, можно использовать, чтобы сформировать уникальную ссылку с формой для обратной связи по определенному треду и добавить её в поле ввода сообщения.\n\ninfo\n\nНастройка кнопок выполняется в таблице `workplace-settings`, находящейся в базе данных.\n\nВы можете настроить и добавить две кнопки одновременно.\n\nКнопка позволяет агенту перейти по ссылке, которая может содержать следующие данные:\n\n*   идентификатор треда;\n*   внешний идентификатор клиента;\n*   идентификатор клиента из CRM-системы заказчика.\n\n### Переменные[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5 \"Direct link to Переменные\")\n\nДля формирования URL кнопки используется шаблон `clientCardUrlTemplate`, который может содержать переменные для замены на актуальные данные:\n\n| Переменная | Данные |\n| --- | --- |\n| `${threadId}` | Идентификатор текущего треда. |\n| `${externalClientId}` | Идентификатор клиента, передаваемый SDK. |\n| `${'path', 'regex', 'replacement', 'flags'}` | Переменная позволяет в шаблоне использовать любой идентификатор клиента из объекта `ClinetInfo` (например, телефон). Также эту переменную в шаблоне ссылки можно указать несколько раз. |\n\n#### Параметры переменной `${'path', 'regex', 'replacement', 'flags'}`[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9-path-regex-replacement-flags \"Direct link to параметры-переменной-path-regex-replacement-flags\")\n\n| Параметр | Характер | Описание |\n| --- | --- | --- |\n| `path` | Обязательный | Путь в объекте `ClientInfo`. Пример: - `common.externalClientId` |\n| `regex` | Необязательный | Паттерн регулярного выражения для поиска в строке. Если параметр не задан — трансформация не выполняется. Примеры: - `^\\+7` — найти префикс +7 в начале строки; - `\\d+` — найти все цифры; - `[^a-zA-Z0-9]` — найти все не алфавитно-цифровые символы. |\n| `replacement` | Необязательный | По умолчанию — пустая строка, на которую будет заменено найденное совпадение. Можно использовать `$1`, `$2` и т. д. для ссылок на группы захвата. `$&` — вставить полное совпадение. Если не задан параметр, но задан паттерн регулярного выражения — найденный текст удаляется. Примеры: - `''` — удалить найденный текст; - `$1-$2-$3` — форматировать захваченные группы через дефис; - `prefix_$&` — добавить префикс ко всему совпадению. |\n| `flags` | Необязательный | флаги регулярного выражения, управляющие поведением поиска. По умолчанию — `g`, глобальный поиск. Доступные флаги, которые можно комбинировать: - `g` — global: найти все совпадения (по умолчанию); - `i` — ignore case: регистронезависимый поиск; - `m` — multiline: `^` и `$` работают с каждой строкой; - `s` — dotAll: точка совпадает с переводом строки. Примеры: - `g` — заменить все вхождения; - `gi` — заменить все вхождения, без учета регистра; - `i` — заменить только первое вхождение, без учета регистра. |\n\n### Дополнительные параметры[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B \"Direct link to Дополнительные параметры\")\n\n| Параметр | Описание |\n| --- | --- |\n| `clientCardUrlText` | Текст кнопки, отображаемой в АРМ агента. |\n| `clientCardUrlSameTab` | Открытие ссылки в существующем или в новом окне. Значение по умолчанию — `false`. Чтобы открывать ссылку в новом окне, оставьте значение по умолчанию. Чтобы открывать ссылку в существующем окне, укажите значение `true`. |\n\ninfo\n\nПараметр `clientCardUrlSameTab` доступен в edna Chat Center версии 6.26 и выше.\n\n### Пример настройки кнопки для перехода по ссылке[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B8-%D0%B4%D0%BB%D1%8F-%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%BE%D0%B4%D0%B0-%D0%BF%D0%BE-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B5 \"Direct link to Пример настройки кнопки для перехода по ссылке\")\n\nworkplace-settings\n\n`\"clientCardUrlTemplate\": \"threadId=${threadld}&externalClientId=${externalClientId}&value=${'common.crm_id', '.*_(\\d+)$', '$1'}\",\"clientCardurlText\" : \"Открыть карточку клиента в CRM\",\"clientCardUrlSameTab\" : \"true\"`\n\ntip\n\nЧтобы удалить кнопку для перевода по ссылке из АРМ агента, удалите ключ `clientCardUrlTemplate` из таблицы `workplace-settings`.\n\nКнопка позволяет агенту сформировать ссылку и добавить ее в поле ввода сообщения, чтобы отправить клиенту. При нажатии на кнопку формируется ссылка по шаблону, указанному в `workplace-settings`. Ссылка может включать в себя идентификатор треда.\n\nДля формирования URL кнопки используется шаблон `clientCardTemplateButton.template`, который может содержать переменную `${threadId}` для замены на актуальный идентификатор треда.\n\nДоступные дополнительные параметры:\n\n| Параметр | Описание |\n| --- | --- |\n| `clientCardTemplateButton.text` | Текст кнопки, отображаемой в АРМ агента. |\n| `clientCardTemplateButton.enabled` | Отображение кнопки в карточке клиента. `false` — значение по умолчанию, чтобы временно скрыть кнопку без удаления настроек. Чтобы отображать кнопку, укажите значение `true`. |\n\n### Пример настройки кнопки для формирования ссылки[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B8-%D0%B4%D0%BB%D1%8F-%D1%84%D0%BE%D1%80%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8 \"Direct link to Пример настройки кнопки для формирования ссылки\")\n\nworkplace-settings\n\n`\"clientCardTemplateButton.template\" : \"https://domain/${threadId}\",\"clientCardTemplateButton.text\" : \"Получить ссылку\",\"clientCardTemplateButton.enabled\" : \"true\"`\n",
  "text": "Title: Добавление кнопок в АРМ агента | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons\n\nMarkdown Content:\nДобавление кнопок в АРМ агента\n------------------------------\n\nОбновлено:\n\n18 сентября 2025\n\nВ АРМ агента можно добавить дополнительные кнопки двух типов:\n\n*   Кнопка для перехода по ссылке в профиле клиента. Например, можно использовать, чтобы из АРМ агента перейти в карточку клиента из CRM-системы заказчика.\n*   Кнопка для формирования ссылки в области поля ввода сообщения. Например, можно использовать, чтобы сформировать уникальную ссылку с формой для обратной связи по определенному треду и добавить её в поле ввода сообщения.\n\ninfo\n\nНастройка кнопок выполняется в таблице `workplace-settings`, находящейся в базе данных.\n\nВы можете настроить и добавить две кнопки одновременно.\n\nКнопка позволяет агенту перейти по ссылке, которая может содержать следующие данные:\n\n*   идентификатор треда;\n*   внешний идентификатор клиента;\n*   идентификатор клиента из CRM-системы заказчика.\n\n### Переменные[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5 \"Direct link to Переменные\")\n\nДля формирования URL кнопки используется шаблон `clientCardUrlTemplate`, который может содержать переменные для замены на актуальные данные:\n\n| Переменная | Данные |\n| --- | --- |\n| `${threadId}` | Идентификатор текущего треда. |\n| `${externalClientId}` | Идентификатор клиента, передаваемый SDK. |\n| `${'path', 'regex', 'replacement', 'flags'}` | Переменная позволяет в шаблоне использовать любой идентификатор клиента из объекта `ClinetInfo` (например, телефон). Также эту переменную в шаблоне ссылки можно указать несколько раз. |\n\n#### Параметры переменной `${'path', 'regex', 'replacement', 'flags'}`[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9-path-regex-replacement-flags \"Direct link to параметры-переменной-path-regex-replacement-flags\")\n\n| Параметр | Характер | Описание |\n| --- | --- | --- |\n| `path` | Обязательный | Путь в объекте `ClientInfo`. Пример: - `common.externalClientId` |\n| `regex` | Необязательный | Паттерн регулярного выражения для поиска в строке. Если параметр не задан — трансформация не выполняется. Примеры: - `^\\+7` — найти префикс +7 в начале строки; - `\\d+` — найти все цифры; - `[^a-zA-Z0-9]` — найти все не алфавитно-цифровые символы. |\n| `replacement` | Необязательный | По умолчанию — пустая строка, на которую будет заменено найденное совпадение. Можно использовать `$1`, `$2` и т. д. для ссылок на группы захвата. `$&` — вставить полное совпадение. Если не задан параметр, но задан паттерн регулярного выражения — найденный текст удаляется. Примеры: - `''` — удалить найденный текст; - `$1-$2-$3` — форматировать захваченные группы через дефис; - `prefix_$&` — добавить префикс ко всему совпадению. |\n| `flags` | Необязательный | флаги регулярного выражения, управляющие поведением поиска. По умолчанию — `g`, глобальный поиск. Доступные флаги, которые можно комбинировать: - `g` — global: найти все совпадения (по умолчанию); - `i` — ignore case: регистронезависимый поиск; - `m` — multiline: `^` и `$` работают с каждой строкой; - `s` — dotAll: точка совпадает с переводом строки. Примеры: - `g` — заменить все вхождения; - `gi` — заменить все вхождения, без учета регистра; - `i` — заменить только первое вхождение, без учета регистра. |\n\n### Дополнительные параметры[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B \"Direct link to Дополнительные параметры\")\n\n| Параметр | Описание |\n| --- | --- |\n| `clientCardUrlText` | Текст кнопки, отображаемой в АРМ агента. |\n| `clientCardUrlSameTab` | Открытие ссылки в существующем или в новом окне. Значение по умолчанию — `false`. Чтобы открывать ссылку в новом окне, оставьте значение по умолчанию. Чтобы открывать ссылку в существующем окне, укажите значение `true`. |\n\ninfo\n\nПараметр `clientCardUrlSameTab` доступен в edna Chat Center версии 6.26 и выше.\n\n### Пример настройки кнопки для перехода по ссылке[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B8-%D0%B4%D0%BB%D1%8F-%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%BE%D0%B4%D0%B0-%D0%BF%D0%BE-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B5 \"Direct link to Пример настройки кнопки для перехода по ссылке\")\n\nworkplace-settings\n\n`\"clientCardUrlTemplate\": \"threadId=${threadld}&externalClientId=${externalClientId}&value=${'common.crm_id', '.*_(\\d+)$', '$1'}\",\"clientCardurlText\" : \"Открыть карточку клиента в CRM\",\"clientCardUrlSameTab\" : \"true\"`\n\ntip\n\nЧтобы удалить кнопку для перевода по ссылке из АРМ агента, удалите ключ `clientCardUrlTemplate` из таблицы `workplace-settings`.\n\nКнопка позволяет агенту сформировать ссылку и добавить ее в поле ввода сообщения, чтобы отправить клиенту. При нажатии на кнопку формируется ссылка по шаблону, указанному в `workplace-settings`. Ссылка может включать в себя идентификатор треда.\n\nДля формирования URL кнопки используется шаблон `clientCardTemplateButton.template`, который может содержать переменную `${threadId}` для замены на актуальный идентификатор треда.\n\nДоступные дополнительные параметры:\n\n| Параметр | Описание |\n| --- | --- |\n| `clientCardTemplateButton.text` | Текст кнопки, отображаемой в АРМ агента. |\n| `clientCardTemplateButton.enabled` | Отображение кнопки в карточке клиента. `false` — значение по умолчанию, чтобы временно скрыть кнопку без удаления настроек. Чтобы отображать кнопку, укажите значение `true`. |\n\n### Пример настройки кнопки для формирования ссылки[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B8-%D0%B4%D0%BB%D1%8F-%D1%84%D0%BE%D1%80%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8 \"Direct link to Пример настройки кнопки для формирования ссылки\")\n\nworkplace-settings\n\n`\"clientCardTemplateButton.template\" : \"https://domain/${threadId}\",\"clientCardTemplateButton.text\" : \"Получить ссылку\",\"clientCardTemplateButton.enabled\" : \"true\"`\n",
  "metadata": {
    "url": "https://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons",
    "content_hash": "7df89d71ae218ead5ad1eca9e0a0f9ce222130a08d0a771b426234510a7d1742",
    "last_modified": "2025-09-19T09:05:54.609233+00:00",
    "etag": null,
    "title": null,
    "page_type": "guide",
    "content_length": 6518,
    "cached_at": "2025-09-19T09:05:54.609233+00:00",
    "html": "Title: Добавление кнопок в АРМ агента | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons\n\nMarkdown Content:\nДобавление кнопок в АРМ агента\n------------------------------\n\nОбновлено:\n\n18 сентября 2025\n\nВ АРМ агента можно добавить дополнительные кнопки двух типов:\n\n*   Кнопка для перехода по ссылке в профиле клиента. Например, можно использовать, чтобы из АРМ агента перейти в карточку клиента из CRM-системы заказчика.\n*   Кнопка для формирования ссылки в области поля ввода сообщения. Например, можно использовать, чтобы сформировать уникальную ссылку с формой для обратной связи по определенному треду и добавить её в поле ввода сообщения.\n\ninfo\n\nНастройка кнопок выполняется в таблице `workplace-settings`, находящейся в базе данных.\n\nВы можете настроить и добавить две кнопки одновременно.\n\nКнопка позволяет агенту перейти по ссылке, которая может содержать следующие данные:\n\n*   идентификатор треда;\n*   внешний идентификатор клиента;\n*   идентификатор клиента из CRM-системы заказчика.\n\n### Переменные[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5 \"Direct link to Переменные\")\n\nДля формирования URL кнопки используется шаблон `clientCardUrlTemplate`, который может содержать переменные для замены на актуальные данные:\n\n| Переменная | Данные |\n| --- | --- |\n| `${threadId}` | Идентификатор текущего треда. |\n| `${externalClientId}` | Идентификатор клиента, передаваемый SDK. |\n| `${'path', 'regex', 'replacement', 'flags'}` | Переменная позволяет в шаблоне использовать любой идентификатор клиента из объекта `ClinetInfo` (например, телефон). Также эту переменную в шаблоне ссылки можно указать несколько раз. |\n\n#### Параметры переменной `${'path', 'regex', 'replacement', 'flags'}`[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9-path-regex-replacement-flags \"Direct link to параметры-переменной-path-regex-replacement-flags\")\n\n| Параметр | Характер | Описание |\n| --- | --- | --- |\n| `path` | Обязательный | Путь в объекте `ClientInfo`. Пример: - `common.externalClientId` |\n| `regex` | Необязательный | Паттерн регулярного выражения для поиска в строке. Если параметр не задан — трансформация не выполняется. Примеры: - `^\\+7` — найти префикс +7 в начале строки; - `\\d+` — найти все цифры; - `[^a-zA-Z0-9]` — найти все не алфавитно-цифровые символы. |\n| `replacement` | Необязательный | По умолчанию — пустая строка, на которую будет заменено найденное совпадение. Можно использовать `$1`, `$2` и т. д. для ссылок на группы захвата. `$&` — вставить полное совпадение. Если не задан параметр, но задан паттерн регулярного выражения — найденный текст удаляется. Примеры: - `''` — удалить найденный текст; - `$1-$2-$3` — форматировать захваченные группы через дефис; - `prefix_$&` — добавить префикс ко всему совпадению. |\n| `flags` | Необязательный | флаги регулярного выражения, управляющие поведением поиска. По умолчанию — `g`, глобальный поиск. Доступные флаги, которые можно комбинировать: - `g` — global: найти все совпадения (по умолчанию); - `i` — ignore case: регистронезависимый поиск; - `m` — multiline: `^` и `$` работают с каждой строкой; - `s` — dotAll: точка совпадает с переводом строки. Примеры: - `g` — заменить все вхождения; - `gi` — заменить все вхождения, без учета регистра; - `i` — заменить только первое вхождение, без учета регистра. |\n\n### Дополнительные параметры[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B \"Direct link to Дополнительные параметры\")\n\n| Параметр | Описание |\n| --- | --- |\n| `clientCardUrlText` | Текст кнопки, отображаемой в АРМ агента. |\n| `clientCardUrlSameTab` | Открытие ссылки в существующем или в новом окне. Значение по умолчанию — `false`. Чтобы открывать ссылку в новом окне, оставьте значение по умолчанию. Чтобы открывать ссылку в существующем окне, укажите значение `true`. |\n\ninfo\n\nПараметр `clientCardUrlSameTab` доступен в edna Chat Center версии 6.26 и выше.\n\n### Пример настройки кнопки для перехода по ссылке[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B8-%D0%B4%D0%BB%D1%8F-%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%BE%D0%B4%D0%B0-%D0%BF%D0%BE-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B5 \"Direct link to Пример настройки кнопки для перехода по ссылке\")\n\nworkplace-settings\n\n`\"clientCardUrlTemplate\": \"threadId=${threadld}&externalClientId=${externalClientId}&value=${'common.crm_id', '.*_(\\d+)$', '$1'}\",\"clientCardurlText\" : \"Открыть карточку клиента в CRM\",\"clientCardUrlSameTab\" : \"true\"`\n\ntip\n\nЧтобы удалить кнопку для перевода по ссылке из АРМ агента, удалите ключ `clientCardUrlTemplate` из таблицы `workplace-settings`.\n\nКнопка позволяет агенту сформировать ссылку и добавить ее в поле ввода сообщения, чтобы отправить клиенту. При нажатии на кнопку формируется ссылка по шаблону, указанному в `workplace-settings`. Ссылка может включать в себя идентификатор треда.\n\nДля формирования URL кнопки используется шаблон `clientCardTemplateButton.template`, который может содержать переменную `${threadId}` для замены на актуальный идентификатор треда.\n\nДоступные дополнительные параметры:\n\n| Параметр | Описание |\n| --- | --- |\n| `clientCardTemplateButton.text` | Текст кнопки, отображаемой в АРМ агента. |\n| `clientCardTemplateButton.enabled` | Отображение кнопки в карточке клиента. `false` — значение по умолчанию, чтобы временно скрыть кнопку без удаления настроек. Чтобы отображать кнопку, укажите значение `true`. |\n\n### Пример настройки кнопки для формирования ссылки[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B8-%D0%B4%D0%BB%D1%8F-%D1%84%D0%BE%D1%80%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8 \"Direct link to Пример настройки кнопки для формирования ссылки\")\n\nworkplace-settings\n\n`\"clientCardTemplateButton.template\" : \"https://domain/${threadId}\",\"clientCardTemplateButton.text\" : \"Получить ссылку\",\"clientCardTemplateButton.enabled\" : \"true\"`\n",
    "text": "Title: Добавление кнопок в АРМ агента | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons\n\nMarkdown Content:\nДобавление кнопок в АРМ агента\n------------------------------\n\nОбновлено:\n\n18 сентября 2025\n\nВ АРМ агента можно добавить дополнительные кнопки двух типов:\n\n*   Кнопка для перехода по ссылке в профиле клиента. Например, можно использовать, чтобы из АРМ агента перейти в карточку клиента из CRM-системы заказчика.\n*   Кнопка для формирования ссылки в области поля ввода сообщения. Например, можно использовать, чтобы сформировать уникальную ссылку с формой для обратной связи по определенному треду и добавить её в поле ввода сообщения.\n\ninfo\n\nНастройка кнопок выполняется в таблице `workplace-settings`, находящейся в базе данных.\n\nВы можете настроить и добавить две кнопки одновременно.\n\nКнопка позволяет агенту перейти по ссылке, которая может содержать следующие данные:\n\n*   идентификатор треда;\n*   внешний идентификатор клиента;\n*   идентификатор клиента из CRM-системы заказчика.\n\n### Переменные[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5 \"Direct link to Переменные\")\n\nДля формирования URL кнопки используется шаблон `clientCardUrlTemplate`, который может содержать переменные для замены на актуальные данные:\n\n| Переменная | Данные |\n| --- | --- |\n| `${threadId}` | Идентификатор текущего треда. |\n| `${externalClientId}` | Идентификатор клиента, передаваемый SDK. |\n| `${'path', 'regex', 'replacement', 'flags'}` | Переменная позволяет в шаблоне использовать любой идентификатор клиента из объекта `ClinetInfo` (например, телефон). Также эту переменную в шаблоне ссылки можно указать несколько раз. |\n\n#### Параметры переменной `${'path', 'regex', 'replacement', 'flags'}`[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9-path-regex-replacement-flags \"Direct link to параметры-переменной-path-regex-replacement-flags\")\n\n| Параметр | Характер | Описание |\n| --- | --- | --- |\n| `path` | Обязательный | Путь в объекте `ClientInfo`. Пример: - `common.externalClientId` |\n| `regex` | Необязательный | Паттерн регулярного выражения для поиска в строке. Если параметр не задан — трансформация не выполняется. Примеры: - `^\\+7` — найти префикс +7 в начале строки; - `\\d+` — найти все цифры; - `[^a-zA-Z0-9]` — найти все не алфавитно-цифровые символы. |\n| `replacement` | Необязательный | По умолчанию — пустая строка, на которую будет заменено найденное совпадение. Можно использовать `$1`, `$2` и т. д. для ссылок на группы захвата. `$&` — вставить полное совпадение. Если не задан параметр, но задан паттерн регулярного выражения — найденный текст удаляется. Примеры: - `''` — удалить найденный текст; - `$1-$2-$3` — форматировать захваченные группы через дефис; - `prefix_$&` — добавить префикс ко всему совпадению. |\n| `flags` | Необязательный | флаги регулярного выражения, управляющие поведением поиска. По умолчанию — `g`, глобальный поиск. Доступные флаги, которые можно комбинировать: - `g` — global: найти все совпадения (по умолчанию); - `i` — ignore case: регистронезависимый поиск; - `m` — multiline: `^` и `$` работают с каждой строкой; - `s` — dotAll: точка совпадает с переводом строки. Примеры: - `g` — заменить все вхождения; - `gi` — заменить все вхождения, без учета регистра; - `i` — заменить только первое вхождение, без учета регистра. |\n\n### Дополнительные параметры[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B \"Direct link to Дополнительные параметры\")\n\n| Параметр | Описание |\n| --- | --- |\n| `clientCardUrlText` | Текст кнопки, отображаемой в АРМ агента. |\n| `clientCardUrlSameTab` | Открытие ссылки в существующем или в новом окне. Значение по умолчанию — `false`. Чтобы открывать ссылку в новом окне, оставьте значение по умолчанию. Чтобы открывать ссылку в существующем окне, укажите значение `true`. |\n\ninfo\n\nПараметр `clientCardUrlSameTab` доступен в edna Chat Center версии 6.26 и выше.\n\n### Пример настройки кнопки для перехода по ссылке[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B8-%D0%B4%D0%BB%D1%8F-%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%BE%D0%B4%D0%B0-%D0%BF%D0%BE-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B5 \"Direct link to Пример настройки кнопки для перехода по ссылке\")\n\nworkplace-settings\n\n`\"clientCardUrlTemplate\": \"threadId=${threadld}&externalClientId=${externalClientId}&value=${'common.crm_id', '.*_(\\d+)$', '$1'}\",\"clientCardurlText\" : \"Открыть карточку клиента в CRM\",\"clientCardUrlSameTab\" : \"true\"`\n\ntip\n\nЧтобы удалить кнопку для перевода по ссылке из АРМ агента, удалите ключ `clientCardUrlTemplate` из таблицы `workplace-settings`.\n\nКнопка позволяет агенту сформировать ссылку и добавить ее в поле ввода сообщения, чтобы отправить клиенту. При нажатии на кнопку формируется ссылка по шаблону, указанному в `workplace-settings`. Ссылка может включать в себя идентификатор треда.\n\nДля формирования URL кнопки используется шаблон `clientCardTemplateButton.template`, который может содержать переменную `${threadId}` для замены на актуальный идентификатор треда.\n\nДоступные дополнительные параметры:\n\n| Параметр | Описание |\n| --- | --- |\n| `clientCardTemplateButton.text` | Текст кнопки, отображаемой в АРМ агента. |\n| `clientCardTemplateButton.enabled` | Отображение кнопки в карточке клиента. `false` — значение по умолчанию, чтобы временно скрыть кнопку без удаления настроек. Чтобы отображать кнопку, укажите значение `true`. |\n\n### Пример настройки кнопки для формирования ссылки[​](http://docs-chatcenter.edna.ru/docs/advanced-settings/client-buttons#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B8-%D0%B4%D0%BB%D1%8F-%D1%84%D0%BE%D1%80%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8 \"Direct link to Пример настройки кнопки для формирования ссылки\")\n\nworkplace-settings\n\n`\"clientCardTemplateButton.template\" : \"https://domain/${threadId}\",\"clientCardTemplateButton.text\" : \"Получить ссылку\",\"clientCardTemplateButton.enabled\" : \"true\"`\n"
  }
}