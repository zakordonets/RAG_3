{
  "html": "Title: Вебхук Message | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-message\n\nMarkdown Content:\nДля синхронных ответов требуется тело ответа, а также должен возвращаться статус `200` (OK); для асинхронных ответов требуется статус `202` (Accepted).\n\nЕсли от клиента приходит несколько сообщений одновременно в момент вызова вебхука, edna может отправить их как отдельные сообщения или как одно, включающее в себе тексты всех сообщений. По умолчанию сообщения отправляются по отдельности. Это поведение управляется настройкой `bot.message.concat`.\n\nПоля тела запроса| **Поле** | **Тип** | **Описание** |\n| --- | --- | --- |\n| `action` | `string` (обязательно) | MESSAGE |\n| `text` | `string` (обязательно) | Сообщение клиента для обработки ботом |\n| `clientId` | `string` (необязательно) | Внешний ID клиента (только для авторизованных клиентов). **Этот параметр устарел, вместо него используйте `threadsClientId`.** |\n| `threadsClientId` | `long` (необязательно) | Внутренний ID клиента (подходит как для авторизованных, так и для неавторизованных клиентов) |\n| `sessionId` | `string` (необязательно) | Внутренний ID треда |\n| `questionId` | `number` (необязательно) | Внутренний ID сообщения клиента в edna |\n| `questionIndex` | `number` (необязательно) | Индекс сообщения клиента в треде |\n| `channelInfo` | `object` (обязательно) | Информация о канале, в котором получено сообщение |\n| `channelType` | `string` | Тип канала |\n| `authorized` | `boolean` | `true` - авторизован, `false` - не авторизован |\n| `platform` | `string` (необязательно) | Только для типа канала (`channelType`) `MOBILE`: `iOS` или `Android`: |\n| `clientData` | `dictionary` (необязательно) | Данные клиента |\n| `segmentationInfo` | map<String, String> | Дополнительные параметры для изменения сегментации (используется как в пользовательских, так и в преднастроенных сегментах). Параметр сегментации `personal_manager` доступен \"из коробки\". Если в этом параметре передан логин агента, а маршрут для сегмента с этим параметром настроен в системе, треды клиентов распределяются по соответствующему маршруту персональным менеджерам (агентам). |\n| `receivedAt` | `string` (обязательно) | Время получения сообщения, дата в формате UTC: yyyy-MM-dd’T’HH:mm:ss.SSS’Z' |\n| `attachments` | `array of object` (необязательно) | Поля * `url` - URL файла, строка до 4000 символов * `name` - Имя файла, строка до 1000 символов * `type` - MIME-тип файла, строка до 256 символов * `size` - Размер файла в байтах, целое число |\n| `sender` | `string` (обязательно) | Информация об отправителе, всегда `ThreadsAPI` |\n| `settings` | `Object` (необязательно) | Дополнительные настройки сообщения |\n| `settings.blockInput` | `boolean` (необязательно) | Параметр, который указывает, заблокировано ли поле ввода сообщения (`true` - заблокировано, `false` - не заблокировано). Работает только для быстрых ответов. |\n| `settings.masked` | `boolean` (необязательно) | Параметр, который указывает, замаскированы ли цифры в связанном сообщении клиента (`true` - замаскированы, `false` - не замаскированы). |\n| `metaData` | `Object` (необязательно) | Отправляется боту при включенной функциональности распознавания голосовых сообщений |\n| `metaData.speechText` | `boolean` | Распознанный текст голосового сообщения |\n| `metaData.score` | `Integer` | Качество распознавания (число от 0 до 100) |\n| `metaData.resultStatus` | `String` | Статус распознавания. Допустимые значения: `processing`, `success`, `noInput`, `maxSpeech`, `noMatch`, `error` |\n| `payload` | `String` (необязательно) | В этом поле передается код кнопки, которая была нажата, или ID элемента `ListPicker`, который был выбран клиентом |\n\n`POST <url for webhook message> HTTP/1.1    Content-Type: application/json        {       \"action\":\"MESSAGE\",       \"threadsClientId\":1,       \"sessionId\":\"1\",       \"questionId\":43,       \"questionIndex\":null,       \"receivedAt\":\"2018-11-13T13:13:11.876Z\",       \"text\":\"Message\",       \"channelInfo\":{          \"channelType\":\"MOBILE\",          \"authorized\":true       ,       \"platform\":\"Android\",       \"attachments\":[          {             \"url\":\"hhtp://...\",             \"name\":\"test.jpg\",             \"type\":\"image/jpeg\",             \"size\":256           ],       \"clientData\":{          \"phone\":\"79000000000\"       ,       \"sender\":\"ThreadsAPI\"`\n\nДля синхронных ответов ожидается текст сообщения и статус `200` (OK); для асинхронных ответов ожидается статус `202` (Accepted).\n\n`{       \"action\":\"MESSAGE\",       \"threadsClientId\":1,       \"sessionId\":\"1\",       \"questionId\":43,       \"questionIndex\":null,       \"receivedAt\":\"2018-11-13T13:13:11.756Z\",       \"text\":\"Message\",       \"segmentationInfo\": {            \"key\":\"value\"        ,       \"attachments\":[          {             \"url\":\"https://...\",             \"name\":\"test.jpg\",             \"type\":\"image/jpeg\",             \"size\":256           ],       \"sender\":\"ThreadsAPI\",       \"settings\" : {            \"masked\" : true`\n",
  "text": "Title: Вебхук Message | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-message\n\nMarkdown Content:\nДля синхронных ответов требуется тело ответа, а также должен возвращаться статус `200` (OK); для асинхронных ответов требуется статус `202` (Accepted).\n\nЕсли от клиента приходит несколько сообщений одновременно в момент вызова вебхука, edna может отправить их как отдельные сообщения или как одно, включающее в себе тексты всех сообщений. По умолчанию сообщения отправляются по отдельности. Это поведение управляется настройкой `bot.message.concat`.\n\nПоля тела запроса| **Поле** | **Тип** | **Описание** |\n| --- | --- | --- |\n| `action` | `string` (обязательно) | MESSAGE |\n| `text` | `string` (обязательно) | Сообщение клиента для обработки ботом |\n| `clientId` | `string` (необязательно) | Внешний ID клиента (только для авторизованных клиентов). **Этот параметр устарел, вместо него используйте `threadsClientId`.** |\n| `threadsClientId` | `long` (необязательно) | Внутренний ID клиента (подходит как для авторизованных, так и для неавторизованных клиентов) |\n| `sessionId` | `string` (необязательно) | Внутренний ID треда |\n| `questionId` | `number` (необязательно) | Внутренний ID сообщения клиента в edna |\n| `questionIndex` | `number` (необязательно) | Индекс сообщения клиента в треде |\n| `channelInfo` | `object` (обязательно) | Информация о канале, в котором получено сообщение |\n| `channelType` | `string` | Тип канала |\n| `authorized` | `boolean` | `true` - авторизован, `false` - не авторизован |\n| `platform` | `string` (необязательно) | Только для типа канала (`channelType`) `MOBILE`: `iOS` или `Android`: |\n| `clientData` | `dictionary` (необязательно) | Данные клиента |\n| `segmentationInfo` | map<String, String> | Дополнительные параметры для изменения сегментации (используется как в пользовательских, так и в преднастроенных сегментах). Параметр сегментации `personal_manager` доступен \"из коробки\". Если в этом параметре передан логин агента, а маршрут для сегмента с этим параметром настроен в системе, треды клиентов распределяются по соответствующему маршруту персональным менеджерам (агентам). |\n| `receivedAt` | `string` (обязательно) | Время получения сообщения, дата в формате UTC: yyyy-MM-dd’T’HH:mm:ss.SSS’Z' |\n| `attachments` | `array of object` (необязательно) | Поля * `url` - URL файла, строка до 4000 символов * `name` - Имя файла, строка до 1000 символов * `type` - MIME-тип файла, строка до 256 символов * `size` - Размер файла в байтах, целое число |\n| `sender` | `string` (обязательно) | Информация об отправителе, всегда `ThreadsAPI` |\n| `settings` | `Object` (необязательно) | Дополнительные настройки сообщения |\n| `settings.blockInput` | `boolean` (необязательно) | Параметр, который указывает, заблокировано ли поле ввода сообщения (`true` - заблокировано, `false` - не заблокировано). Работает только для быстрых ответов. |\n| `settings.masked` | `boolean` (необязательно) | Параметр, который указывает, замаскированы ли цифры в связанном сообщении клиента (`true` - замаскированы, `false` - не замаскированы). |\n| `metaData` | `Object` (необязательно) | Отправляется боту при включенной функциональности распознавания голосовых сообщений |\n| `metaData.speechText` | `boolean` | Распознанный текст голосового сообщения |\n| `metaData.score` | `Integer` | Качество распознавания (число от 0 до 100) |\n| `metaData.resultStatus` | `String` | Статус распознавания. Допустимые значения: `processing`, `success`, `noInput`, `maxSpeech`, `noMatch`, `error` |\n| `payload` | `String` (необязательно) | В этом поле передается код кнопки, которая была нажата, или ID элемента `ListPicker`, который был выбран клиентом |\n\n`POST <url for webhook message> HTTP/1.1    Content-Type: application/json        {       \"action\":\"MESSAGE\",       \"threadsClientId\":1,       \"sessionId\":\"1\",       \"questionId\":43,       \"questionIndex\":null,       \"receivedAt\":\"2018-11-13T13:13:11.876Z\",       \"text\":\"Message\",       \"channelInfo\":{          \"channelType\":\"MOBILE\",          \"authorized\":true       ,       \"platform\":\"Android\",       \"attachments\":[          {             \"url\":\"hhtp://...\",             \"name\":\"test.jpg\",             \"type\":\"image/jpeg\",             \"size\":256           ],       \"clientData\":{          \"phone\":\"79000000000\"       ,       \"sender\":\"ThreadsAPI\"`\n\nДля синхронных ответов ожидается текст сообщения и статус `200` (OK); для асинхронных ответов ожидается статус `202` (Accepted).\n\n`{       \"action\":\"MESSAGE\",       \"threadsClientId\":1,       \"sessionId\":\"1\",       \"questionId\":43,       \"questionIndex\":null,       \"receivedAt\":\"2018-11-13T13:13:11.756Z\",       \"text\":\"Message\",       \"segmentationInfo\": {            \"key\":\"value\"        ,       \"attachments\":[          {             \"url\":\"https://...\",             \"name\":\"test.jpg\",             \"type\":\"image/jpeg\",             \"size\":256           ],       \"sender\":\"ThreadsAPI\",       \"settings\" : {            \"masked\" : true`\n",
  "metadata": {
    "url": "https://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-message",
    "content_hash": "36436ab3651ca05e1abee379bf703f6ce1ef6a0dab74ca98ff27ea3c88bb7848",
    "last_modified": "2025-10-03T15:47:03.174996+00:00",
    "etag": null,
    "title": null,
    "page_type": "api",
    "content_strategy": "jina",
    "content_length": 4993,
    "cached_at": "2025-10-03T15:47:03.174996+00:00",
    "html": "Title: Вебхук Message | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-message\n\nMarkdown Content:\nДля синхронных ответов требуется тело ответа, а также должен возвращаться статус `200` (OK); для асинхронных ответов требуется статус `202` (Accepted).\n\nЕсли от клиента приходит несколько сообщений одновременно в момент вызова вебхука, edna может отправить их как отдельные сообщения или как одно, включающее в себе тексты всех сообщений. По умолчанию сообщения отправляются по отдельности. Это поведение управляется настройкой `bot.message.concat`.\n\nПоля тела запроса| **Поле** | **Тип** | **Описание** |\n| --- | --- | --- |\n| `action` | `string` (обязательно) | MESSAGE |\n| `text` | `string` (обязательно) | Сообщение клиента для обработки ботом |\n| `clientId` | `string` (необязательно) | Внешний ID клиента (только для авторизованных клиентов). **Этот параметр устарел, вместо него используйте `threadsClientId`.** |\n| `threadsClientId` | `long` (необязательно) | Внутренний ID клиента (подходит как для авторизованных, так и для неавторизованных клиентов) |\n| `sessionId` | `string` (необязательно) | Внутренний ID треда |\n| `questionId` | `number` (необязательно) | Внутренний ID сообщения клиента в edna |\n| `questionIndex` | `number` (необязательно) | Индекс сообщения клиента в треде |\n| `channelInfo` | `object` (обязательно) | Информация о канале, в котором получено сообщение |\n| `channelType` | `string` | Тип канала |\n| `authorized` | `boolean` | `true` - авторизован, `false` - не авторизован |\n| `platform` | `string` (необязательно) | Только для типа канала (`channelType`) `MOBILE`: `iOS` или `Android`: |\n| `clientData` | `dictionary` (необязательно) | Данные клиента |\n| `segmentationInfo` | map<String, String> | Дополнительные параметры для изменения сегментации (используется как в пользовательских, так и в преднастроенных сегментах). Параметр сегментации `personal_manager` доступен \"из коробки\". Если в этом параметре передан логин агента, а маршрут для сегмента с этим параметром настроен в системе, треды клиентов распределяются по соответствующему маршруту персональным менеджерам (агентам). |\n| `receivedAt` | `string` (обязательно) | Время получения сообщения, дата в формате UTC: yyyy-MM-dd’T’HH:mm:ss.SSS’Z' |\n| `attachments` | `array of object` (необязательно) | Поля * `url` - URL файла, строка до 4000 символов * `name` - Имя файла, строка до 1000 символов * `type` - MIME-тип файла, строка до 256 символов * `size` - Размер файла в байтах, целое число |\n| `sender` | `string` (обязательно) | Информация об отправителе, всегда `ThreadsAPI` |\n| `settings` | `Object` (необязательно) | Дополнительные настройки сообщения |\n| `settings.blockInput` | `boolean` (необязательно) | Параметр, который указывает, заблокировано ли поле ввода сообщения (`true` - заблокировано, `false` - не заблокировано). Работает только для быстрых ответов. |\n| `settings.masked` | `boolean` (необязательно) | Параметр, который указывает, замаскированы ли цифры в связанном сообщении клиента (`true` - замаскированы, `false` - не замаскированы). |\n| `metaData` | `Object` (необязательно) | Отправляется боту при включенной функциональности распознавания голосовых сообщений |\n| `metaData.speechText` | `boolean` | Распознанный текст голосового сообщения |\n| `metaData.score` | `Integer` | Качество распознавания (число от 0 до 100) |\n| `metaData.resultStatus` | `String` | Статус распознавания. Допустимые значения: `processing`, `success`, `noInput`, `maxSpeech`, `noMatch`, `error` |\n| `payload` | `String` (необязательно) | В этом поле передается код кнопки, которая была нажата, или ID элемента `ListPicker`, который был выбран клиентом |\n\n`POST <url for webhook message> HTTP/1.1    Content-Type: application/json        {       \"action\":\"MESSAGE\",       \"threadsClientId\":1,       \"sessionId\":\"1\",       \"questionId\":43,       \"questionIndex\":null,       \"receivedAt\":\"2018-11-13T13:13:11.876Z\",       \"text\":\"Message\",       \"channelInfo\":{          \"channelType\":\"MOBILE\",          \"authorized\":true       ,       \"platform\":\"Android\",       \"attachments\":[          {             \"url\":\"hhtp://...\",             \"name\":\"test.jpg\",             \"type\":\"image/jpeg\",             \"size\":256           ],       \"clientData\":{          \"phone\":\"79000000000\"       ,       \"sender\":\"ThreadsAPI\"`\n\nДля синхронных ответов ожидается текст сообщения и статус `200` (OK); для асинхронных ответов ожидается статус `202` (Accepted).\n\n`{       \"action\":\"MESSAGE\",       \"threadsClientId\":1,       \"sessionId\":\"1\",       \"questionId\":43,       \"questionIndex\":null,       \"receivedAt\":\"2018-11-13T13:13:11.756Z\",       \"text\":\"Message\",       \"segmentationInfo\": {            \"key\":\"value\"        ,       \"attachments\":[          {             \"url\":\"https://...\",             \"name\":\"test.jpg\",             \"type\":\"image/jpeg\",             \"size\":256           ],       \"sender\":\"ThreadsAPI\",       \"settings\" : {            \"masked\" : true`\n",
    "text": "Title: Вебхук Message | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-message\n\nMarkdown Content:\nДля синхронных ответов требуется тело ответа, а также должен возвращаться статус `200` (OK); для асинхронных ответов требуется статус `202` (Accepted).\n\nЕсли от клиента приходит несколько сообщений одновременно в момент вызова вебхука, edna может отправить их как отдельные сообщения или как одно, включающее в себе тексты всех сообщений. По умолчанию сообщения отправляются по отдельности. Это поведение управляется настройкой `bot.message.concat`.\n\nПоля тела запроса| **Поле** | **Тип** | **Описание** |\n| --- | --- | --- |\n| `action` | `string` (обязательно) | MESSAGE |\n| `text` | `string` (обязательно) | Сообщение клиента для обработки ботом |\n| `clientId` | `string` (необязательно) | Внешний ID клиента (только для авторизованных клиентов). **Этот параметр устарел, вместо него используйте `threadsClientId`.** |\n| `threadsClientId` | `long` (необязательно) | Внутренний ID клиента (подходит как для авторизованных, так и для неавторизованных клиентов) |\n| `sessionId` | `string` (необязательно) | Внутренний ID треда |\n| `questionId` | `number` (необязательно) | Внутренний ID сообщения клиента в edna |\n| `questionIndex` | `number` (необязательно) | Индекс сообщения клиента в треде |\n| `channelInfo` | `object` (обязательно) | Информация о канале, в котором получено сообщение |\n| `channelType` | `string` | Тип канала |\n| `authorized` | `boolean` | `true` - авторизован, `false` - не авторизован |\n| `platform` | `string` (необязательно) | Только для типа канала (`channelType`) `MOBILE`: `iOS` или `Android`: |\n| `clientData` | `dictionary` (необязательно) | Данные клиента |\n| `segmentationInfo` | map<String, String> | Дополнительные параметры для изменения сегментации (используется как в пользовательских, так и в преднастроенных сегментах). Параметр сегментации `personal_manager` доступен \"из коробки\". Если в этом параметре передан логин агента, а маршрут для сегмента с этим параметром настроен в системе, треды клиентов распределяются по соответствующему маршруту персональным менеджерам (агентам). |\n| `receivedAt` | `string` (обязательно) | Время получения сообщения, дата в формате UTC: yyyy-MM-dd’T’HH:mm:ss.SSS’Z' |\n| `attachments` | `array of object` (необязательно) | Поля * `url` - URL файла, строка до 4000 символов * `name` - Имя файла, строка до 1000 символов * `type` - MIME-тип файла, строка до 256 символов * `size` - Размер файла в байтах, целое число |\n| `sender` | `string` (обязательно) | Информация об отправителе, всегда `ThreadsAPI` |\n| `settings` | `Object` (необязательно) | Дополнительные настройки сообщения |\n| `settings.blockInput` | `boolean` (необязательно) | Параметр, который указывает, заблокировано ли поле ввода сообщения (`true` - заблокировано, `false` - не заблокировано). Работает только для быстрых ответов. |\n| `settings.masked` | `boolean` (необязательно) | Параметр, который указывает, замаскированы ли цифры в связанном сообщении клиента (`true` - замаскированы, `false` - не замаскированы). |\n| `metaData` | `Object` (необязательно) | Отправляется боту при включенной функциональности распознавания голосовых сообщений |\n| `metaData.speechText` | `boolean` | Распознанный текст голосового сообщения |\n| `metaData.score` | `Integer` | Качество распознавания (число от 0 до 100) |\n| `metaData.resultStatus` | `String` | Статус распознавания. Допустимые значения: `processing`, `success`, `noInput`, `maxSpeech`, `noMatch`, `error` |\n| `payload` | `String` (необязательно) | В этом поле передается код кнопки, которая была нажата, или ID элемента `ListPicker`, который был выбран клиентом |\n\n`POST <url for webhook message> HTTP/1.1    Content-Type: application/json        {       \"action\":\"MESSAGE\",       \"threadsClientId\":1,       \"sessionId\":\"1\",       \"questionId\":43,       \"questionIndex\":null,       \"receivedAt\":\"2018-11-13T13:13:11.876Z\",       \"text\":\"Message\",       \"channelInfo\":{          \"channelType\":\"MOBILE\",          \"authorized\":true       ,       \"platform\":\"Android\",       \"attachments\":[          {             \"url\":\"hhtp://...\",             \"name\":\"test.jpg\",             \"type\":\"image/jpeg\",             \"size\":256           ],       \"clientData\":{          \"phone\":\"79000000000\"       ,       \"sender\":\"ThreadsAPI\"`\n\nДля синхронных ответов ожидается текст сообщения и статус `200` (OK); для асинхронных ответов ожидается статус `202` (Accepted).\n\n`{       \"action\":\"MESSAGE\",       \"threadsClientId\":1,       \"sessionId\":\"1\",       \"questionId\":43,       \"questionIndex\":null,       \"receivedAt\":\"2018-11-13T13:13:11.756Z\",       \"text\":\"Message\",       \"segmentationInfo\": {            \"key\":\"value\"        ,       \"attachments\":[          {             \"url\":\"https://...\",             \"name\":\"test.jpg\",             \"type\":\"image/jpeg\",             \"size\":256           ],       \"sender\":\"ThreadsAPI\",       \"settings\" : {            \"masked\" : true`\n"
  }
}