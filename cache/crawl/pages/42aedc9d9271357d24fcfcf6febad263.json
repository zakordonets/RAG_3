{
  "html": "Title: Вебхук Hints | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints\n\nMarkdown Content:\nВебхук Hints | edna Chat Center\n\n===============\n\n[Перейти к основному содержимому](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#__docusaurus_skipToContent_fallback)\n\n[![Image 2: Main Logo](http://docs-chatcenter.edna.ru/img/cc-logo-white.svg)](http://docs-chatcenter.edna.ru/)\n*   [![Image 3](http://docs-chatcenter.edna.ru/img/cc-logo-white.svg)](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n*   [![Image 4](http://docs-chatcenter.edna.ru/img/logo_black.svg)](https://docs-pulse.edna.ru/)\n\n[Пользовательская документация](http://docs-chatcenter.edna.ru/docs/start/)[API](http://docs-chatcenter.edna.ru/docs/api/index)\n\n[История версий](http://docs-chatcenter.edna.ru/blog)\n\nЗапрос в поддержку\n\nctrl K\n\n[](http://docs-chatcenter.edna.ru/)\n*   [Обратная совместимость API](http://docs-chatcenter.edna.ru/docs/api/index)\n*   [API edna Chat Center](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#) \n*   [API edna Bot Connect](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#) \n    *   [Введение](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/intro)\n    *   [Описание Bot API](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/description)\n    *   [Быстрый старт](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/start)\n    *   [Вебхук Init Chat](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-init-chat)\n    *   [Вебхук Message](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-message)\n    *   [Вебхук Training](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-training)\n    *   [Кастомизация данных клиента (clientData) в содержимом вебхука](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/client-data)\n    *   [Приветствие](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/greeting)\n    *   [Отправка ответов бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id)\n    *   [Подсказки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/hints)\n    *   [История сообщений](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/history)\n    *   [Закрытие треда ботом](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread)\n    *   [Закрытие треда ботом и комментарием от него](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread-with-comment)\n    *   [Создание нового треда с сообщением из рассылки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-thread)\n    *   [Вебхук Client contact provided](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-client-contact-provided)\n    *   [Создание нового клиента](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-client)\n    *   [Отправка исходящих сообщений от бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers)\n    *   [Вебхук Hints](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n    *   [Проставление тегов треду](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/add-tags-to-thread)\n    *   [Получение списка доступных тегов](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/get-list-tags)\n\n*   [](http://docs-chatcenter.edna.ru/)\n*   API edna Bot Connect\n*   Вебхук Hints\n\nСодержание этой страницы\n\nВебхук Hints\n============\n\nЭтот вебхук предназначен для тренировки бота на основании диалогов между агентами и клиентами. После этого бот сможет отправлять подсказки агентам. В таких подсказках содержатся вероятные варианты ответов клиентам, которые могут быть крайне полезными и эффективными в работе агентов.\n\nБот отправляет сообщения, если тред принадлежит пользователю с ролью `Operator` (то есть агенту).\n\nВам необходимо включить настройку, которая позволит тренировать бота.\n\nСкрипт[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82 \"Прямая ссылка на Скрипт\")\n------------------------------------------------------------------------------------------------------------------------------------------------\n\n`INSERT INTO settings (ID, key, value) VALUES (nextval('settings_id_seq'), 'bot.connect.training.chat.enabled', 'true');`\n\nВам также необходимо добавить вебхук для соответствующего бота в АРМ администратора.\n\n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| `action` | boolean (обязательно) | TRAINING |\n| `text` | string (обязательно) | Сообщение клиента или агента, которое вы хотите направить боту на обучение |\n| `clientId` | string (необязательно) | Внешний ID клиента (только для авторизованных клиентов).**Этот параметр устарел**, вместо него `используйте threadsClientId`. |\n| `threadsClientId` | Long (необязательно) | Внутренний ID клиента (подходит как для авторизованных, так и для неавторизованных клиентов) |\n| `sessionId` | string (необязательно) | Внутренний ID треда |\n| `receivedAt` | string (обязательно) | Время получения сообщения, дата в формате UTC: `yyyy-MM-dd’T’HH:mm:ss.SSS’Z’` |\n| `attachments` | array of object (необязательно) | - `url` – URL файла, строка до 4000 символов- `name` – Имя файла, строка до 1000 символов- `type` – MIME-тип файла, строка до 256 символов- `size` – Размер файла в байтах, целое число |\n| `messageIndex` | int(обязательно) | Индекс сообщения в рамках треда |\n| `messageOwner` | string (обязательно) | Автор сообщения (`CLIENT`/`OPERATOR`) |\n| `channelInfo` | object (обязательно) | Информация о канале, в котором получено сообщение |\n| `id` | string | Channel ID |\n| `channelType` | string | Тип канала (`WEB`,`MOBILE`,`EMAIL`,`VIBER`,`TELEGRAM`,`VIBERPA`,`FACEBOOK`,`VKONTAKTE`,`YANDEX`,`WHATSAPP`,`APPLE_BUSINESS_CHAT`) |\n| `authorized` | boolean | `true`– авторизован,`false`– не авторизован |\n\nHTTP запрос[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81 \"Прямая ссылка на HTTP запрос\")\n---------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n`POST <url for webhook training> HTTP/1.1Content-Type: application/json{   \"operator\":{      \"id\":3,      \"name\":\"Maria\",      \"role\":\"OPERATOR\",      \"maxThreads\":6,      \"freeSlots\":0,      \"photoUrl\":null   },   \"messageIndex\":7,   \"messageOwner\":\"CLIENT\",   \"action\":\"TRAINING\",   \"clientId\":\"1111\",   \"threadsClientId\":218,   \"sessionId\":\"249\",   \"receivedAt\":\"2021-03-25T03:12:28.825Z\",   \"text\":\"asdf\",   \"channelInfo\":{      \"id\":1,      \"channelType\":\"WEB\",      \"authorized\":true   },   \"attachments\":[   ],   \"clientData\":{      \"locale\":\"ru\"   },   \"sender\":\"ThreadsAPI\"}`\n\n### Пример успешного HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Прямая ссылка на Пример успешного HTTP запроса\")\n\nДля синхронных ответов ожидается текст сообщения и статус `200` (OK); для асинхронных ответов ожидается статус `202` (Accepted).\n\n`{   \"sessionId\":\"1\",   \"messageIndex\":\"1\",   \"hints\":[      {         \"text\":\"hint 1\",         \"score\":0.4      },      {         \"text\":\"hint 2\",         \"score\":0.6      }   ]}`\n\nПараметры ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0 \"Прямая ссылка на Параметры ответа\")\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| `sessionId` | string (необязательно) | Внутренний ID треда |\n| `messageIndex` | integer (обязательно) | Индекс сообщения в рамках треда |\n| `messageOwner` | string (обязательно) | Автор сообщения (CLIENT/OPERATOR) |\n| `hints` | array of object (необязательно) | Подсказки бота для агентов (`text` и `score`) |\n\n[Предыдущая страница Отправка исходящих сообщений от бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers)[Следующая страница Проставление тегов треду](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/add-tags-to-thread)\n\n*   [Скрипт](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82)\n*   [HTTP запрос](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81)\n    *   [Пример успешного HTTP запроса](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0)\n\n*   [Параметры ответа](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0)\n\n[![Image 5](http://docs-chatcenter.edna.ru/img/logo-footer.svg)](https://edna.ru/)\n",
  "text": "Title: Вебхук Hints | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints\n\nMarkdown Content:\nВебхук Hints | edna Chat Center\n\n===============\n\n[Перейти к основному содержимому](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#__docusaurus_skipToContent_fallback)\n\n[![Image 2: Main Logo](http://docs-chatcenter.edna.ru/img/cc-logo-white.svg)](http://docs-chatcenter.edna.ru/)\n*   [![Image 3](http://docs-chatcenter.edna.ru/img/cc-logo-white.svg)](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n*   [![Image 4](http://docs-chatcenter.edna.ru/img/logo_black.svg)](https://docs-pulse.edna.ru/)\n\n[Пользовательская документация](http://docs-chatcenter.edna.ru/docs/start/)[API](http://docs-chatcenter.edna.ru/docs/api/index)\n\n[История версий](http://docs-chatcenter.edna.ru/blog)\n\nЗапрос в поддержку\n\nctrl K\n\n[](http://docs-chatcenter.edna.ru/)\n*   [Обратная совместимость API](http://docs-chatcenter.edna.ru/docs/api/index)\n*   [API edna Chat Center](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#) \n*   [API edna Bot Connect](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#) \n    *   [Введение](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/intro)\n    *   [Описание Bot API](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/description)\n    *   [Быстрый старт](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/start)\n    *   [Вебхук Init Chat](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-init-chat)\n    *   [Вебхук Message](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-message)\n    *   [Вебхук Training](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-training)\n    *   [Кастомизация данных клиента (clientData) в содержимом вебхука](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/client-data)\n    *   [Приветствие](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/greeting)\n    *   [Отправка ответов бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id)\n    *   [Подсказки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/hints)\n    *   [История сообщений](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/history)\n    *   [Закрытие треда ботом](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread)\n    *   [Закрытие треда ботом и комментарием от него](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread-with-comment)\n    *   [Создание нового треда с сообщением из рассылки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-thread)\n    *   [Вебхук Client contact provided](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-client-contact-provided)\n    *   [Создание нового клиента](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-client)\n    *   [Отправка исходящих сообщений от бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers)\n    *   [Вебхук Hints](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n    *   [Проставление тегов треду](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/add-tags-to-thread)\n    *   [Получение списка доступных тегов](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/get-list-tags)\n\n*   [](http://docs-chatcenter.edna.ru/)\n*   API edna Bot Connect\n*   Вебхук Hints\n\nСодержание этой страницы\n\nВебхук Hints\n============\n\nЭтот вебхук предназначен для тренировки бота на основании диалогов между агентами и клиентами. После этого бот сможет отправлять подсказки агентам. В таких подсказках содержатся вероятные варианты ответов клиентам, которые могут быть крайне полезными и эффективными в работе агентов.\n\nБот отправляет сообщения, если тред принадлежит пользователю с ролью `Operator` (то есть агенту).\n\nВам необходимо включить настройку, которая позволит тренировать бота.\n\nСкрипт[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82 \"Прямая ссылка на Скрипт\")\n------------------------------------------------------------------------------------------------------------------------------------------------\n\n`INSERT INTO settings (ID, key, value) VALUES (nextval('settings_id_seq'), 'bot.connect.training.chat.enabled', 'true');`\n\nВам также необходимо добавить вебхук для соответствующего бота в АРМ администратора.\n\n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| `action` | boolean (обязательно) | TRAINING |\n| `text` | string (обязательно) | Сообщение клиента или агента, которое вы хотите направить боту на обучение |\n| `clientId` | string (необязательно) | Внешний ID клиента (только для авторизованных клиентов).**Этот параметр устарел**, вместо него `используйте threadsClientId`. |\n| `threadsClientId` | Long (необязательно) | Внутренний ID клиента (подходит как для авторизованных, так и для неавторизованных клиентов) |\n| `sessionId` | string (необязательно) | Внутренний ID треда |\n| `receivedAt` | string (обязательно) | Время получения сообщения, дата в формате UTC: `yyyy-MM-dd’T’HH:mm:ss.SSS’Z’` |\n| `attachments` | array of object (необязательно) | - `url` – URL файла, строка до 4000 символов- `name` – Имя файла, строка до 1000 символов- `type` – MIME-тип файла, строка до 256 символов- `size` – Размер файла в байтах, целое число |\n| `messageIndex` | int(обязательно) | Индекс сообщения в рамках треда |\n| `messageOwner` | string (обязательно) | Автор сообщения (`CLIENT`/`OPERATOR`) |\n| `channelInfo` | object (обязательно) | Информация о канале, в котором получено сообщение |\n| `id` | string | Channel ID |\n| `channelType` | string | Тип канала (`WEB`,`MOBILE`,`EMAIL`,`VIBER`,`TELEGRAM`,`VIBERPA`,`FACEBOOK`,`VKONTAKTE`,`YANDEX`,`WHATSAPP`,`APPLE_BUSINESS_CHAT`) |\n| `authorized` | boolean | `true`– авторизован,`false`– не авторизован |\n\nHTTP запрос[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81 \"Прямая ссылка на HTTP запрос\")\n---------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n`POST <url for webhook training> HTTP/1.1Content-Type: application/json{   \"operator\":{      \"id\":3,      \"name\":\"Maria\",      \"role\":\"OPERATOR\",      \"maxThreads\":6,      \"freeSlots\":0,      \"photoUrl\":null   },   \"messageIndex\":7,   \"messageOwner\":\"CLIENT\",   \"action\":\"TRAINING\",   \"clientId\":\"1111\",   \"threadsClientId\":218,   \"sessionId\":\"249\",   \"receivedAt\":\"2021-03-25T03:12:28.825Z\",   \"text\":\"asdf\",   \"channelInfo\":{      \"id\":1,      \"channelType\":\"WEB\",      \"authorized\":true   },   \"attachments\":[   ],   \"clientData\":{      \"locale\":\"ru\"   },   \"sender\":\"ThreadsAPI\"}`\n\n### Пример успешного HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Прямая ссылка на Пример успешного HTTP запроса\")\n\nДля синхронных ответов ожидается текст сообщения и статус `200` (OK); для асинхронных ответов ожидается статус `202` (Accepted).\n\n`{   \"sessionId\":\"1\",   \"messageIndex\":\"1\",   \"hints\":[      {         \"text\":\"hint 1\",         \"score\":0.4      },      {         \"text\":\"hint 2\",         \"score\":0.6      }   ]}`\n\nПараметры ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0 \"Прямая ссылка на Параметры ответа\")\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| `sessionId` | string (необязательно) | Внутренний ID треда |\n| `messageIndex` | integer (обязательно) | Индекс сообщения в рамках треда |\n| `messageOwner` | string (обязательно) | Автор сообщения (CLIENT/OPERATOR) |\n| `hints` | array of object (необязательно) | Подсказки бота для агентов (`text` и `score`) |\n\n[Предыдущая страница Отправка исходящих сообщений от бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers)[Следующая страница Проставление тегов треду](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/add-tags-to-thread)\n\n*   [Скрипт](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82)\n*   [HTTP запрос](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81)\n    *   [Пример успешного HTTP запроса](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0)\n\n*   [Параметры ответа](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0)\n\n[![Image 5](http://docs-chatcenter.edna.ru/img/logo-footer.svg)](https://edna.ru/)\n",
  "metadata": {
    "url": "https://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints",
    "content_hash": "6decdacacb220b9008d1614ca0bfc1382d506374a9e6d5c914090439f337c1af",
    "last_modified": "2025-10-03T15:46:44.015673+00:00",
    "etag": null,
    "title": null,
    "page_type": "api",
    "content_strategy": "jina",
    "content_length": 9269,
    "cached_at": "2025-10-03T15:46:44.015673+00:00",
    "html": "Title: Вебхук Hints | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints\n\nMarkdown Content:\nВебхук Hints | edna Chat Center\n\n===============\n\n[Перейти к основному содержимому](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#__docusaurus_skipToContent_fallback)\n\n[![Image 2: Main Logo](http://docs-chatcenter.edna.ru/img/cc-logo-white.svg)](http://docs-chatcenter.edna.ru/)\n*   [![Image 3](http://docs-chatcenter.edna.ru/img/cc-logo-white.svg)](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n*   [![Image 4](http://docs-chatcenter.edna.ru/img/logo_black.svg)](https://docs-pulse.edna.ru/)\n\n[Пользовательская документация](http://docs-chatcenter.edna.ru/docs/start/)[API](http://docs-chatcenter.edna.ru/docs/api/index)\n\n[История версий](http://docs-chatcenter.edna.ru/blog)\n\nЗапрос в поддержку\n\nctrl K\n\n[](http://docs-chatcenter.edna.ru/)\n*   [Обратная совместимость API](http://docs-chatcenter.edna.ru/docs/api/index)\n*   [API edna Chat Center](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#) \n*   [API edna Bot Connect](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#) \n    *   [Введение](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/intro)\n    *   [Описание Bot API](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/description)\n    *   [Быстрый старт](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/start)\n    *   [Вебхук Init Chat](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-init-chat)\n    *   [Вебхук Message](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-message)\n    *   [Вебхук Training](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-training)\n    *   [Кастомизация данных клиента (clientData) в содержимом вебхука](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/client-data)\n    *   [Приветствие](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/greeting)\n    *   [Отправка ответов бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id)\n    *   [Подсказки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/hints)\n    *   [История сообщений](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/history)\n    *   [Закрытие треда ботом](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread)\n    *   [Закрытие треда ботом и комментарием от него](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread-with-comment)\n    *   [Создание нового треда с сообщением из рассылки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-thread)\n    *   [Вебхук Client contact provided](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-client-contact-provided)\n    *   [Создание нового клиента](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-client)\n    *   [Отправка исходящих сообщений от бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers)\n    *   [Вебхук Hints](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n    *   [Проставление тегов треду](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/add-tags-to-thread)\n    *   [Получение списка доступных тегов](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/get-list-tags)\n\n*   [](http://docs-chatcenter.edna.ru/)\n*   API edna Bot Connect\n*   Вебхук Hints\n\nСодержание этой страницы\n\nВебхук Hints\n============\n\nЭтот вебхук предназначен для тренировки бота на основании диалогов между агентами и клиентами. После этого бот сможет отправлять подсказки агентам. В таких подсказках содержатся вероятные варианты ответов клиентам, которые могут быть крайне полезными и эффективными в работе агентов.\n\nБот отправляет сообщения, если тред принадлежит пользователю с ролью `Operator` (то есть агенту).\n\nВам необходимо включить настройку, которая позволит тренировать бота.\n\nСкрипт[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82 \"Прямая ссылка на Скрипт\")\n------------------------------------------------------------------------------------------------------------------------------------------------\n\n`INSERT INTO settings (ID, key, value) VALUES (nextval('settings_id_seq'), 'bot.connect.training.chat.enabled', 'true');`\n\nВам также необходимо добавить вебхук для соответствующего бота в АРМ администратора.\n\n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| `action` | boolean (обязательно) | TRAINING |\n| `text` | string (обязательно) | Сообщение клиента или агента, которое вы хотите направить боту на обучение |\n| `clientId` | string (необязательно) | Внешний ID клиента (только для авторизованных клиентов).**Этот параметр устарел**, вместо него `используйте threadsClientId`. |\n| `threadsClientId` | Long (необязательно) | Внутренний ID клиента (подходит как для авторизованных, так и для неавторизованных клиентов) |\n| `sessionId` | string (необязательно) | Внутренний ID треда |\n| `receivedAt` | string (обязательно) | Время получения сообщения, дата в формате UTC: `yyyy-MM-dd’T’HH:mm:ss.SSS’Z’` |\n| `attachments` | array of object (необязательно) | - `url` – URL файла, строка до 4000 символов- `name` – Имя файла, строка до 1000 символов- `type` – MIME-тип файла, строка до 256 символов- `size` – Размер файла в байтах, целое число |\n| `messageIndex` | int(обязательно) | Индекс сообщения в рамках треда |\n| `messageOwner` | string (обязательно) | Автор сообщения (`CLIENT`/`OPERATOR`) |\n| `channelInfo` | object (обязательно) | Информация о канале, в котором получено сообщение |\n| `id` | string | Channel ID |\n| `channelType` | string | Тип канала (`WEB`,`MOBILE`,`EMAIL`,`VIBER`,`TELEGRAM`,`VIBERPA`,`FACEBOOK`,`VKONTAKTE`,`YANDEX`,`WHATSAPP`,`APPLE_BUSINESS_CHAT`) |\n| `authorized` | boolean | `true`– авторизован,`false`– не авторизован |\n\nHTTP запрос[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81 \"Прямая ссылка на HTTP запрос\")\n---------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n`POST <url for webhook training> HTTP/1.1Content-Type: application/json{   \"operator\":{      \"id\":3,      \"name\":\"Maria\",      \"role\":\"OPERATOR\",      \"maxThreads\":6,      \"freeSlots\":0,      \"photoUrl\":null   },   \"messageIndex\":7,   \"messageOwner\":\"CLIENT\",   \"action\":\"TRAINING\",   \"clientId\":\"1111\",   \"threadsClientId\":218,   \"sessionId\":\"249\",   \"receivedAt\":\"2021-03-25T03:12:28.825Z\",   \"text\":\"asdf\",   \"channelInfo\":{      \"id\":1,      \"channelType\":\"WEB\",      \"authorized\":true   },   \"attachments\":[   ],   \"clientData\":{      \"locale\":\"ru\"   },   \"sender\":\"ThreadsAPI\"}`\n\n### Пример успешного HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Прямая ссылка на Пример успешного HTTP запроса\")\n\nДля синхронных ответов ожидается текст сообщения и статус `200` (OK); для асинхронных ответов ожидается статус `202` (Accepted).\n\n`{   \"sessionId\":\"1\",   \"messageIndex\":\"1\",   \"hints\":[      {         \"text\":\"hint 1\",         \"score\":0.4      },      {         \"text\":\"hint 2\",         \"score\":0.6      }   ]}`\n\nПараметры ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0 \"Прямая ссылка на Параметры ответа\")\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| `sessionId` | string (необязательно) | Внутренний ID треда |\n| `messageIndex` | integer (обязательно) | Индекс сообщения в рамках треда |\n| `messageOwner` | string (обязательно) | Автор сообщения (CLIENT/OPERATOR) |\n| `hints` | array of object (необязательно) | Подсказки бота для агентов (`text` и `score`) |\n\n[Предыдущая страница Отправка исходящих сообщений от бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers)[Следующая страница Проставление тегов треду](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/add-tags-to-thread)\n\n*   [Скрипт](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82)\n*   [HTTP запрос](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81)\n    *   [Пример успешного HTTP запроса](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0)\n\n*   [Параметры ответа](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0)\n\n[![Image 5](http://docs-chatcenter.edna.ru/img/logo-footer.svg)](https://edna.ru/)\n",
    "text": "Title: Вебхук Hints | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints\n\nMarkdown Content:\nВебхук Hints | edna Chat Center\n\n===============\n\n[Перейти к основному содержимому](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#__docusaurus_skipToContent_fallback)\n\n[![Image 2: Main Logo](http://docs-chatcenter.edna.ru/img/cc-logo-white.svg)](http://docs-chatcenter.edna.ru/)\n*   [![Image 3](http://docs-chatcenter.edna.ru/img/cc-logo-white.svg)](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n*   [![Image 4](http://docs-chatcenter.edna.ru/img/logo_black.svg)](https://docs-pulse.edna.ru/)\n\n[Пользовательская документация](http://docs-chatcenter.edna.ru/docs/start/)[API](http://docs-chatcenter.edna.ru/docs/api/index)\n\n[История версий](http://docs-chatcenter.edna.ru/blog)\n\nЗапрос в поддержку\n\nctrl K\n\n[](http://docs-chatcenter.edna.ru/)\n*   [Обратная совместимость API](http://docs-chatcenter.edna.ru/docs/api/index)\n*   [API edna Chat Center](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#) \n*   [API edna Bot Connect](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#) \n    *   [Введение](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/intro)\n    *   [Описание Bot API](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/description)\n    *   [Быстрый старт](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/start)\n    *   [Вебхук Init Chat](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-init-chat)\n    *   [Вебхук Message](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-message)\n    *   [Вебхук Training](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-training)\n    *   [Кастомизация данных клиента (clientData) в содержимом вебхука](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/client-data)\n    *   [Приветствие](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/greeting)\n    *   [Отправка ответов бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id)\n    *   [Подсказки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/hints)\n    *   [История сообщений](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/history)\n    *   [Закрытие треда ботом](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread)\n    *   [Закрытие треда ботом и комментарием от него](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread-with-comment)\n    *   [Создание нового треда с сообщением из рассылки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-thread)\n    *   [Вебхук Client contact provided](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-client-contact-provided)\n    *   [Создание нового клиента](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-client)\n    *   [Отправка исходящих сообщений от бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers)\n    *   [Вебхук Hints](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n    *   [Проставление тегов треду](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/add-tags-to-thread)\n    *   [Получение списка доступных тегов](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/get-list-tags)\n\n*   [](http://docs-chatcenter.edna.ru/)\n*   API edna Bot Connect\n*   Вебхук Hints\n\nСодержание этой страницы\n\nВебхук Hints\n============\n\nЭтот вебхук предназначен для тренировки бота на основании диалогов между агентами и клиентами. После этого бот сможет отправлять подсказки агентам. В таких подсказках содержатся вероятные варианты ответов клиентам, которые могут быть крайне полезными и эффективными в работе агентов.\n\nБот отправляет сообщения, если тред принадлежит пользователю с ролью `Operator` (то есть агенту).\n\nВам необходимо включить настройку, которая позволит тренировать бота.\n\nСкрипт[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82 \"Прямая ссылка на Скрипт\")\n------------------------------------------------------------------------------------------------------------------------------------------------\n\n`INSERT INTO settings (ID, key, value) VALUES (nextval('settings_id_seq'), 'bot.connect.training.chat.enabled', 'true');`\n\nВам также необходимо добавить вебхук для соответствующего бота в АРМ администратора.\n\n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| `action` | boolean (обязательно) | TRAINING |\n| `text` | string (обязательно) | Сообщение клиента или агента, которое вы хотите направить боту на обучение |\n| `clientId` | string (необязательно) | Внешний ID клиента (только для авторизованных клиентов).**Этот параметр устарел**, вместо него `используйте threadsClientId`. |\n| `threadsClientId` | Long (необязательно) | Внутренний ID клиента (подходит как для авторизованных, так и для неавторизованных клиентов) |\n| `sessionId` | string (необязательно) | Внутренний ID треда |\n| `receivedAt` | string (обязательно) | Время получения сообщения, дата в формате UTC: `yyyy-MM-dd’T’HH:mm:ss.SSS’Z’` |\n| `attachments` | array of object (необязательно) | - `url` – URL файла, строка до 4000 символов- `name` – Имя файла, строка до 1000 символов- `type` – MIME-тип файла, строка до 256 символов- `size` – Размер файла в байтах, целое число |\n| `messageIndex` | int(обязательно) | Индекс сообщения в рамках треда |\n| `messageOwner` | string (обязательно) | Автор сообщения (`CLIENT`/`OPERATOR`) |\n| `channelInfo` | object (обязательно) | Информация о канале, в котором получено сообщение |\n| `id` | string | Channel ID |\n| `channelType` | string | Тип канала (`WEB`,`MOBILE`,`EMAIL`,`VIBER`,`TELEGRAM`,`VIBERPA`,`FACEBOOK`,`VKONTAKTE`,`YANDEX`,`WHATSAPP`,`APPLE_BUSINESS_CHAT`) |\n| `authorized` | boolean | `true`– авторизован,`false`– не авторизован |\n\nHTTP запрос[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81 \"Прямая ссылка на HTTP запрос\")\n---------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n`POST <url for webhook training> HTTP/1.1Content-Type: application/json{   \"operator\":{      \"id\":3,      \"name\":\"Maria\",      \"role\":\"OPERATOR\",      \"maxThreads\":6,      \"freeSlots\":0,      \"photoUrl\":null   },   \"messageIndex\":7,   \"messageOwner\":\"CLIENT\",   \"action\":\"TRAINING\",   \"clientId\":\"1111\",   \"threadsClientId\":218,   \"sessionId\":\"249\",   \"receivedAt\":\"2021-03-25T03:12:28.825Z\",   \"text\":\"asdf\",   \"channelInfo\":{      \"id\":1,      \"channelType\":\"WEB\",      \"authorized\":true   },   \"attachments\":[   ],   \"clientData\":{      \"locale\":\"ru\"   },   \"sender\":\"ThreadsAPI\"}`\n\n### Пример успешного HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Прямая ссылка на Пример успешного HTTP запроса\")\n\nДля синхронных ответов ожидается текст сообщения и статус `200` (OK); для асинхронных ответов ожидается статус `202` (Accepted).\n\n`{   \"sessionId\":\"1\",   \"messageIndex\":\"1\",   \"hints\":[      {         \"text\":\"hint 1\",         \"score\":0.4      },      {         \"text\":\"hint 2\",         \"score\":0.6      }   ]}`\n\nПараметры ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0 \"Прямая ссылка на Параметры ответа\")\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n| Параметр | Тип | Описание |\n| --- | --- | --- |\n| `sessionId` | string (необязательно) | Внутренний ID треда |\n| `messageIndex` | integer (обязательно) | Индекс сообщения в рамках треда |\n| `messageOwner` | string (обязательно) | Автор сообщения (CLIENT/OPERATOR) |\n| `hints` | array of object (необязательно) | Подсказки бота для агентов (`text` и `score`) |\n\n[Предыдущая страница Отправка исходящих сообщений от бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers)[Следующая страница Проставление тегов треду](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/add-tags-to-thread)\n\n*   [Скрипт](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82)\n*   [HTTP запрос](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81)\n    *   [Пример успешного HTTP запроса](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0)\n\n*   [Параметры ответа](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0)\n\n[![Image 5](http://docs-chatcenter.edna.ru/img/logo-footer.svg)](https://edna.ru/)\n"
  }
}