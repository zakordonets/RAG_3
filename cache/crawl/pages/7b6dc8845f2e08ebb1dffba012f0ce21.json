{
  "html": "Title: Отправка ответов бота | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id\n\nMarkdown Content:\nОтправка ответов бота\n---------------------\n\nЭтот метод отправляет ответы, которые бот сможет использовать, отвечая на вопросы клиентов. После того как боту отправлено сообщение (вебхук `MESSAGE`), вам необходимо отправить ответ бота на это сообщение на POST эндпоинт `<threadsUrl/api/v1/chatbot`.\n\nСуществуют четыре типа ответов:\n\n*   По `threadsClientId` - Внутренний ID клиента, подходит и для авторизованных, и для неавторизованных клиентов. Этот тип предпочтителен для всех новых интеграций.\n\n*   По `questionId` - Используется, когда известен идентификатор конкретного вопроса.\n\n*   По `sessionId` и `questionIndex` - Используется, когда `questionID` вопроса неизвестен, и вам необходимо ответить на сообщение для того, чтобы выяснить индекс вопроса в треде.\n\n*   4. (**Устарело**) По `clientId` - Чаще используется для авторизованных клиентов, когда требуется написать клиенту; не имеет привязки к конкретному вопросу.\n\ninfo\n\nЕсли в ответе есть изображение, то для того, чтобы файл верно отображался клиенту, название изображения должно содержать расширение файла, либо же должен быть указан тип файла (например, image/jpg).\n\nwarning\n\nЕсли получено сообщение с типом `EMAIL`, на него необходимо отвечать по `sessionId` и `questionIndex`, т.к. у одного email адреса клиента может существовать несколько активных тредов, созданных по теме email, так что вам необходимо знать, в какой конкретно тред отправить сообщение.\n\nПоля тела запроса**Поле****Тип****Описание**\n`text`string Ответ бота на сообщение от клиента. Обязательный параметр, если не использован `formattedText`.\n`answerId`string Уникальный идентификатор ответа бота\n`formattedText`string (необязательно)Ответ бота на сообщение от клиента. В ответе может содержаться текст в разметке Markdown. Рекомендуется передать текстовое представление ответа в поле `text` для отображения в пользовательском интерфейсе.\n`clientId`string (необязательно, deprecated)Внешний ID клиента. **Этот параметр устарел, вместо него используйте `threadsClientId`.**\n`threadsClientId`long (необязательно)Внутренний ID клиента\n`sessionId`string (необязательно)Внутренний ID треда (ID чата клиента с агентом)\n`questionId`number (необязательно)Внутренний ID сообщения клиента\n`questionIndex`number (необязательно)Индекс сообщения клиента в треде (чате)\n`segmentationInfo`Map<String, String>Дополнительные параметры для сегментации (используется как в пользовательских, так и в преднастроенных сегментах). Параметр сегментации `personal_manager` доступен \"из коробки\". Если в этом параметре передан логин агента, а маршрут для сегмента с этим параметром настроен в системе, треды клиентов распределяются по соответствующему маршруту персональным менеджерам (агентам).\nattachments array (необязательно)Поля\n*   `url` - URL файла, строка до 4000 символов\n\n*   `name` - Название файла, строка до 1000 символов\n\n*   `type` - MIME-тип файла, строка до 256 символов\n`code`string Значения\n*   `UNCLEAR_QUESTION` - Вопрос не понятен боту, поэтому он переводит его человеку (т.е агенту).\n\n*   `SWITCH_TO_HUMAN` - Бот получил запрос на перевод диалога на человека (т.е агенту).\n\n*   `SUCCESS` - Бот успешно обработал сообщение клиента и отправил ответ.\n`userIds`set<long>(необязательно)Список идентификаторов агентов, на которых необходимо перевести тред после снятия его с текущего бота. Необходимо присылать в сочетании с кодом `SWITCH_TO_HUMAN`.\n`skillIds`set<long>(необязательно)Список идентификаторов навыков, которыми должны владеть агента, на которых необходимо перевести тред после снятия его с текущего бота. Необходимо присылать в сочетании с кодом `SWITCH_TO_HUMAN`.\n`unitIds`set<long>(необязательно)Список идентификаторов департаментов, на агентов из которых необходимо перевести тред после снятия его с текущего бота. Необходимо присылать в сочетании с кодом `SWITCH_TO_HUMAN`.\n`settings`Object (необязательно)Дополнительные настройки сообщения\n`settings.blockInput``boolean` (необязательно)Параметр, который указывает, заблокировано ли поле ввода сообщения (`true` - заблокировано, `false` - не заблокировано). Работает только для быстрых ответов.\n`settings.masked``boolean` (необязательно)Параметр, который указывает, замаскированы ли цифры в связанном сообщении клиента (`true` - замаскированы, `false` - не замаскированы).\n`quickReplies``array` (необязательно)*   `type` - Тип быстрого ответа. Возможные значения: `TEXT` для текстовых сообщений, `CONTACT` для получения данных о клиенте.\n\n*   `text` - Текст сообщения, строка до 4000 символов\n\n*   `shown_text` - Текстовое содержимое, необязательный параметр, строка до 2000 символов. Используется только в комбинации с параметром `text`. Если параметр указан, этот текст отправляется как клиентское сообщение после нажатия на кнопку быстрого ответа.\n\n*   `callback_data` - Текстовое содержимое, необязательный параметр, строка до 255 символов. Название события, которое будет передаваться, когда вызван JS SDK API для последующей обработки заказчиком на стороне сайта.\n\n*   `imageUrl` - URL иконки кнопки, строка до 4000 символов.\n\n*   `url` - Ссылка на прикрепленный файл, строка до 4000 символов.\n\nДлина и количество быстрых ответов настраивается в БД: `message.max-quick-replies`, `message.max-quick-reply-length`\n`quickRepliesHeaderFooter``Object` (необязательно)Дополнительные заголовок и подпись (только для Whatsapp)\n`quickRepliesHeaderFooter.header``array` (необязательно)*   `text` - Текст заголовка, максимальная длина 61 символ\n\n*   `imageUrl` - URL изображения\n\n*   `documentUrl` - URL файла\n\n*   `documentName` - Название файла\n\n*   `videoUrl` - URL видеофайла\n\nВ заголовке `header` можно передать параметры: текст заголовка, изображение, документ, видео. Отправить одновременно в заголовке и текст, и изображение, и документ, и видео нельзя.\n`quickRepliesHeaderFooter.footer``array` (необязательно)Поля\n*   `text` - Текст подписи, максимальная длина 61 символ\n`messageListPicker``Object` (необязательно)Интерактивный список (только для Whatsapp)\n`messageListPicker.header``Object` (необязательно)Поля\n*   `text` (string) - Текст заголовка, максимальная длина 60 символов\n`messageListPicker.footer``Object` (необязательно)Поля\n*   `text` (string) - Текст подписи, максимальная длина 60 символов\n`messageListPicker.title``string`Наименование кнопки для интерактивного списка, максимальная длина 20 символов\n`messageListPicker.sections`array (Максимум 10 элементов во всех `items`)Поля\n*   `title` (string) - Заголовок секции с элементами, который отображается пользователю, максимальная длина 24 символа\n\n*   `items` (array)\n`messageListPicker.section.items`array Поля\n*   `title` (string) - Название элемента, максимальная длина 24 символа\n\n*   `subTitle` (string (необязательно)) - Подзаголовок элемента, максимальная длина 72 символа\n\n*   `identifier` (string) – сквозной для всего сообщения ID элемента, вернется в ответном сообщении пользователя\n\nwarning\n\n`answerId` является уникальным значением. В случае повторного получения значение сообщение не будет доставлено клиенту. Если получен ответ на вопрос, для которого ранее уже был получен ответ бота, то в зависимости от настроек системы сообщение может быть: отклонено и доставка сообщения клиенту не будет выполнена (строгий режим) или отправка будет выполнена независимо от текста, отправляемого сообщения (мягкий режим). То есть клиент может получить дублирующее сообщение от бота.\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.304Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : false,    \"masked\" : true  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 566Host: localhost:8080{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.304Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : false,    \"masked\" : true  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: a26146a5-0858-45f8-b914-a1731ab50c42Vary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl-1 \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"questionId\" : 43,  \"receivedAt\" : \"2024-12-28T11:39:34.356Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0-1 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 542Host: localhost:8080{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"questionId\" : 43,  \"receivedAt\" : \"2024-12-28T11:39:34.356Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0-1 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: a88aedba-36e1-4f0a-9c52-e01b3455d024Vary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl-2 \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : { ,  \"sessionId\" : \"1\",  \"questionIndex\" : 3,  \"receivedAt\" : \"2024-12-28T11:39:34.383Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0-2 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 475Host: localhost:8080{  \"segmentationInfo\" : { ,  \"sessionId\" : \"1\",  \"questionIndex\" : 3,  \"receivedAt\" : \"2024-12-28T11:39:34.383Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0-2 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: 0e2b8474-c889-4355-9721-de3c180ba58dVary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl-3 \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : { ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.344Z\",  \"quickReplies\" : [ {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 1\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null  , {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 2\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SUCCESS\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0-3 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 614Host: localhost:8080{  \"segmentationInfo\" : { ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.344Z\",  \"quickReplies\" : [ {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 1\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null  , {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 2\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SUCCESS\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0-3 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: 236280d9-3e4d-41f8-a983-ca5c8a554144Vary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n",
  "text": "Title: Отправка ответов бота | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id\n\nMarkdown Content:\nОтправка ответов бота\n---------------------\n\nЭтот метод отправляет ответы, которые бот сможет использовать, отвечая на вопросы клиентов. После того как боту отправлено сообщение (вебхук `MESSAGE`), вам необходимо отправить ответ бота на это сообщение на POST эндпоинт `<threadsUrl/api/v1/chatbot`.\n\nСуществуют четыре типа ответов:\n\n*   По `threadsClientId` - Внутренний ID клиента, подходит и для авторизованных, и для неавторизованных клиентов. Этот тип предпочтителен для всех новых интеграций.\n\n*   По `questionId` - Используется, когда известен идентификатор конкретного вопроса.\n\n*   По `sessionId` и `questionIndex` - Используется, когда `questionID` вопроса неизвестен, и вам необходимо ответить на сообщение для того, чтобы выяснить индекс вопроса в треде.\n\n*   4. (**Устарело**) По `clientId` - Чаще используется для авторизованных клиентов, когда требуется написать клиенту; не имеет привязки к конкретному вопросу.\n\ninfo\n\nЕсли в ответе есть изображение, то для того, чтобы файл верно отображался клиенту, название изображения должно содержать расширение файла, либо же должен быть указан тип файла (например, image/jpg).\n\nwarning\n\nЕсли получено сообщение с типом `EMAIL`, на него необходимо отвечать по `sessionId` и `questionIndex`, т.к. у одного email адреса клиента может существовать несколько активных тредов, созданных по теме email, так что вам необходимо знать, в какой конкретно тред отправить сообщение.\n\nПоля тела запроса**Поле****Тип****Описание**\n`text`string Ответ бота на сообщение от клиента. Обязательный параметр, если не использован `formattedText`.\n`answerId`string Уникальный идентификатор ответа бота\n`formattedText`string (необязательно)Ответ бота на сообщение от клиента. В ответе может содержаться текст в разметке Markdown. Рекомендуется передать текстовое представление ответа в поле `text` для отображения в пользовательском интерфейсе.\n`clientId`string (необязательно, deprecated)Внешний ID клиента. **Этот параметр устарел, вместо него используйте `threadsClientId`.**\n`threadsClientId`long (необязательно)Внутренний ID клиента\n`sessionId`string (необязательно)Внутренний ID треда (ID чата клиента с агентом)\n`questionId`number (необязательно)Внутренний ID сообщения клиента\n`questionIndex`number (необязательно)Индекс сообщения клиента в треде (чате)\n`segmentationInfo`Map<String, String>Дополнительные параметры для сегментации (используется как в пользовательских, так и в преднастроенных сегментах). Параметр сегментации `personal_manager` доступен \"из коробки\". Если в этом параметре передан логин агента, а маршрут для сегмента с этим параметром настроен в системе, треды клиентов распределяются по соответствующему маршруту персональным менеджерам (агентам).\nattachments array (необязательно)Поля\n*   `url` - URL файла, строка до 4000 символов\n\n*   `name` - Название файла, строка до 1000 символов\n\n*   `type` - MIME-тип файла, строка до 256 символов\n`code`string Значения\n*   `UNCLEAR_QUESTION` - Вопрос не понятен боту, поэтому он переводит его человеку (т.е агенту).\n\n*   `SWITCH_TO_HUMAN` - Бот получил запрос на перевод диалога на человека (т.е агенту).\n\n*   `SUCCESS` - Бот успешно обработал сообщение клиента и отправил ответ.\n`userIds`set<long>(необязательно)Список идентификаторов агентов, на которых необходимо перевести тред после снятия его с текущего бота. Необходимо присылать в сочетании с кодом `SWITCH_TO_HUMAN`.\n`skillIds`set<long>(необязательно)Список идентификаторов навыков, которыми должны владеть агента, на которых необходимо перевести тред после снятия его с текущего бота. Необходимо присылать в сочетании с кодом `SWITCH_TO_HUMAN`.\n`unitIds`set<long>(необязательно)Список идентификаторов департаментов, на агентов из которых необходимо перевести тред после снятия его с текущего бота. Необходимо присылать в сочетании с кодом `SWITCH_TO_HUMAN`.\n`settings`Object (необязательно)Дополнительные настройки сообщения\n`settings.blockInput``boolean` (необязательно)Параметр, который указывает, заблокировано ли поле ввода сообщения (`true` - заблокировано, `false` - не заблокировано). Работает только для быстрых ответов.\n`settings.masked``boolean` (необязательно)Параметр, который указывает, замаскированы ли цифры в связанном сообщении клиента (`true` - замаскированы, `false` - не замаскированы).\n`quickReplies``array` (необязательно)*   `type` - Тип быстрого ответа. Возможные значения: `TEXT` для текстовых сообщений, `CONTACT` для получения данных о клиенте.\n\n*   `text` - Текст сообщения, строка до 4000 символов\n\n*   `shown_text` - Текстовое содержимое, необязательный параметр, строка до 2000 символов. Используется только в комбинации с параметром `text`. Если параметр указан, этот текст отправляется как клиентское сообщение после нажатия на кнопку быстрого ответа.\n\n*   `callback_data` - Текстовое содержимое, необязательный параметр, строка до 255 символов. Название события, которое будет передаваться, когда вызван JS SDK API для последующей обработки заказчиком на стороне сайта.\n\n*   `imageUrl` - URL иконки кнопки, строка до 4000 символов.\n\n*   `url` - Ссылка на прикрепленный файл, строка до 4000 символов.\n\nДлина и количество быстрых ответов настраивается в БД: `message.max-quick-replies`, `message.max-quick-reply-length`\n`quickRepliesHeaderFooter``Object` (необязательно)Дополнительные заголовок и подпись (только для Whatsapp)\n`quickRepliesHeaderFooter.header``array` (необязательно)*   `text` - Текст заголовка, максимальная длина 61 символ\n\n*   `imageUrl` - URL изображения\n\n*   `documentUrl` - URL файла\n\n*   `documentName` - Название файла\n\n*   `videoUrl` - URL видеофайла\n\nВ заголовке `header` можно передать параметры: текст заголовка, изображение, документ, видео. Отправить одновременно в заголовке и текст, и изображение, и документ, и видео нельзя.\n`quickRepliesHeaderFooter.footer``array` (необязательно)Поля\n*   `text` - Текст подписи, максимальная длина 61 символ\n`messageListPicker``Object` (необязательно)Интерактивный список (только для Whatsapp)\n`messageListPicker.header``Object` (необязательно)Поля\n*   `text` (string) - Текст заголовка, максимальная длина 60 символов\n`messageListPicker.footer``Object` (необязательно)Поля\n*   `text` (string) - Текст подписи, максимальная длина 60 символов\n`messageListPicker.title``string`Наименование кнопки для интерактивного списка, максимальная длина 20 символов\n`messageListPicker.sections`array (Максимум 10 элементов во всех `items`)Поля\n*   `title` (string) - Заголовок секции с элементами, который отображается пользователю, максимальная длина 24 символа\n\n*   `items` (array)\n`messageListPicker.section.items`array Поля\n*   `title` (string) - Название элемента, максимальная длина 24 символа\n\n*   `subTitle` (string (необязательно)) - Подзаголовок элемента, максимальная длина 72 символа\n\n*   `identifier` (string) – сквозной для всего сообщения ID элемента, вернется в ответном сообщении пользователя\n\nwarning\n\n`answerId` является уникальным значением. В случае повторного получения значение сообщение не будет доставлено клиенту. Если получен ответ на вопрос, для которого ранее уже был получен ответ бота, то в зависимости от настроек системы сообщение может быть: отклонено и доставка сообщения клиенту не будет выполнена (строгий режим) или отправка будет выполнена независимо от текста, отправляемого сообщения (мягкий режим). То есть клиент может получить дублирующее сообщение от бота.\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.304Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : false,    \"masked\" : true  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 566Host: localhost:8080{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.304Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : false,    \"masked\" : true  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: a26146a5-0858-45f8-b914-a1731ab50c42Vary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl-1 \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"questionId\" : 43,  \"receivedAt\" : \"2024-12-28T11:39:34.356Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0-1 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 542Host: localhost:8080{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"questionId\" : 43,  \"receivedAt\" : \"2024-12-28T11:39:34.356Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0-1 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: a88aedba-36e1-4f0a-9c52-e01b3455d024Vary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl-2 \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : { ,  \"sessionId\" : \"1\",  \"questionIndex\" : 3,  \"receivedAt\" : \"2024-12-28T11:39:34.383Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0-2 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 475Host: localhost:8080{  \"segmentationInfo\" : { ,  \"sessionId\" : \"1\",  \"questionIndex\" : 3,  \"receivedAt\" : \"2024-12-28T11:39:34.383Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0-2 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: 0e2b8474-c889-4355-9721-de3c180ba58dVary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl-3 \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : { ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.344Z\",  \"quickReplies\" : [ {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 1\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null  , {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 2\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SUCCESS\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0-3 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 614Host: localhost:8080{  \"segmentationInfo\" : { ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.344Z\",  \"quickReplies\" : [ {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 1\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null  , {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 2\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SUCCESS\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0-3 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: 236280d9-3e4d-41f8-a983-ca5c8a554144Vary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n",
  "metadata": {
    "url": "https://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id",
    "content_hash": "74f6590b123a1daee9b3a1ec5942e112c0e80282c6c013483c99458f0fb4af6c",
    "last_modified": "2025-09-19T09:03:31.970085+00:00",
    "etag": null,
    "title": null,
    "page_type": "api",
    "content_length": 17111,
    "cached_at": "2025-09-19T09:03:31.970085+00:00",
    "html": "Title: Отправка ответов бота | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id\n\nMarkdown Content:\nОтправка ответов бота\n---------------------\n\nЭтот метод отправляет ответы, которые бот сможет использовать, отвечая на вопросы клиентов. После того как боту отправлено сообщение (вебхук `MESSAGE`), вам необходимо отправить ответ бота на это сообщение на POST эндпоинт `<threadsUrl/api/v1/chatbot`.\n\nСуществуют четыре типа ответов:\n\n*   По `threadsClientId` - Внутренний ID клиента, подходит и для авторизованных, и для неавторизованных клиентов. Этот тип предпочтителен для всех новых интеграций.\n\n*   По `questionId` - Используется, когда известен идентификатор конкретного вопроса.\n\n*   По `sessionId` и `questionIndex` - Используется, когда `questionID` вопроса неизвестен, и вам необходимо ответить на сообщение для того, чтобы выяснить индекс вопроса в треде.\n\n*   4. (**Устарело**) По `clientId` - Чаще используется для авторизованных клиентов, когда требуется написать клиенту; не имеет привязки к конкретному вопросу.\n\ninfo\n\nЕсли в ответе есть изображение, то для того, чтобы файл верно отображался клиенту, название изображения должно содержать расширение файла, либо же должен быть указан тип файла (например, image/jpg).\n\nwarning\n\nЕсли получено сообщение с типом `EMAIL`, на него необходимо отвечать по `sessionId` и `questionIndex`, т.к. у одного email адреса клиента может существовать несколько активных тредов, созданных по теме email, так что вам необходимо знать, в какой конкретно тред отправить сообщение.\n\nПоля тела запроса**Поле****Тип****Описание**\n`text`string Ответ бота на сообщение от клиента. Обязательный параметр, если не использован `formattedText`.\n`answerId`string Уникальный идентификатор ответа бота\n`formattedText`string (необязательно)Ответ бота на сообщение от клиента. В ответе может содержаться текст в разметке Markdown. Рекомендуется передать текстовое представление ответа в поле `text` для отображения в пользовательском интерфейсе.\n`clientId`string (необязательно, deprecated)Внешний ID клиента. **Этот параметр устарел, вместо него используйте `threadsClientId`.**\n`threadsClientId`long (необязательно)Внутренний ID клиента\n`sessionId`string (необязательно)Внутренний ID треда (ID чата клиента с агентом)\n`questionId`number (необязательно)Внутренний ID сообщения клиента\n`questionIndex`number (необязательно)Индекс сообщения клиента в треде (чате)\n`segmentationInfo`Map<String, String>Дополнительные параметры для сегментации (используется как в пользовательских, так и в преднастроенных сегментах). Параметр сегментации `personal_manager` доступен \"из коробки\". Если в этом параметре передан логин агента, а маршрут для сегмента с этим параметром настроен в системе, треды клиентов распределяются по соответствующему маршруту персональным менеджерам (агентам).\nattachments array (необязательно)Поля\n*   `url` - URL файла, строка до 4000 символов\n\n*   `name` - Название файла, строка до 1000 символов\n\n*   `type` - MIME-тип файла, строка до 256 символов\n`code`string Значения\n*   `UNCLEAR_QUESTION` - Вопрос не понятен боту, поэтому он переводит его человеку (т.е агенту).\n\n*   `SWITCH_TO_HUMAN` - Бот получил запрос на перевод диалога на человека (т.е агенту).\n\n*   `SUCCESS` - Бот успешно обработал сообщение клиента и отправил ответ.\n`userIds`set<long>(необязательно)Список идентификаторов агентов, на которых необходимо перевести тред после снятия его с текущего бота. Необходимо присылать в сочетании с кодом `SWITCH_TO_HUMAN`.\n`skillIds`set<long>(необязательно)Список идентификаторов навыков, которыми должны владеть агента, на которых необходимо перевести тред после снятия его с текущего бота. Необходимо присылать в сочетании с кодом `SWITCH_TO_HUMAN`.\n`unitIds`set<long>(необязательно)Список идентификаторов департаментов, на агентов из которых необходимо перевести тред после снятия его с текущего бота. Необходимо присылать в сочетании с кодом `SWITCH_TO_HUMAN`.\n`settings`Object (необязательно)Дополнительные настройки сообщения\n`settings.blockInput``boolean` (необязательно)Параметр, который указывает, заблокировано ли поле ввода сообщения (`true` - заблокировано, `false` - не заблокировано). Работает только для быстрых ответов.\n`settings.masked``boolean` (необязательно)Параметр, который указывает, замаскированы ли цифры в связанном сообщении клиента (`true` - замаскированы, `false` - не замаскированы).\n`quickReplies``array` (необязательно)*   `type` - Тип быстрого ответа. Возможные значения: `TEXT` для текстовых сообщений, `CONTACT` для получения данных о клиенте.\n\n*   `text` - Текст сообщения, строка до 4000 символов\n\n*   `shown_text` - Текстовое содержимое, необязательный параметр, строка до 2000 символов. Используется только в комбинации с параметром `text`. Если параметр указан, этот текст отправляется как клиентское сообщение после нажатия на кнопку быстрого ответа.\n\n*   `callback_data` - Текстовое содержимое, необязательный параметр, строка до 255 символов. Название события, которое будет передаваться, когда вызван JS SDK API для последующей обработки заказчиком на стороне сайта.\n\n*   `imageUrl` - URL иконки кнопки, строка до 4000 символов.\n\n*   `url` - Ссылка на прикрепленный файл, строка до 4000 символов.\n\nДлина и количество быстрых ответов настраивается в БД: `message.max-quick-replies`, `message.max-quick-reply-length`\n`quickRepliesHeaderFooter``Object` (необязательно)Дополнительные заголовок и подпись (только для Whatsapp)\n`quickRepliesHeaderFooter.header``array` (необязательно)*   `text` - Текст заголовка, максимальная длина 61 символ\n\n*   `imageUrl` - URL изображения\n\n*   `documentUrl` - URL файла\n\n*   `documentName` - Название файла\n\n*   `videoUrl` - URL видеофайла\n\nВ заголовке `header` можно передать параметры: текст заголовка, изображение, документ, видео. Отправить одновременно в заголовке и текст, и изображение, и документ, и видео нельзя.\n`quickRepliesHeaderFooter.footer``array` (необязательно)Поля\n*   `text` - Текст подписи, максимальная длина 61 символ\n`messageListPicker``Object` (необязательно)Интерактивный список (только для Whatsapp)\n`messageListPicker.header``Object` (необязательно)Поля\n*   `text` (string) - Текст заголовка, максимальная длина 60 символов\n`messageListPicker.footer``Object` (необязательно)Поля\n*   `text` (string) - Текст подписи, максимальная длина 60 символов\n`messageListPicker.title``string`Наименование кнопки для интерактивного списка, максимальная длина 20 символов\n`messageListPicker.sections`array (Максимум 10 элементов во всех `items`)Поля\n*   `title` (string) - Заголовок секции с элементами, который отображается пользователю, максимальная длина 24 символа\n\n*   `items` (array)\n`messageListPicker.section.items`array Поля\n*   `title` (string) - Название элемента, максимальная длина 24 символа\n\n*   `subTitle` (string (необязательно)) - Подзаголовок элемента, максимальная длина 72 символа\n\n*   `identifier` (string) – сквозной для всего сообщения ID элемента, вернется в ответном сообщении пользователя\n\nwarning\n\n`answerId` является уникальным значением. В случае повторного получения значение сообщение не будет доставлено клиенту. Если получен ответ на вопрос, для которого ранее уже был получен ответ бота, то в зависимости от настроек системы сообщение может быть: отклонено и доставка сообщения клиенту не будет выполнена (строгий режим) или отправка будет выполнена независимо от текста, отправляемого сообщения (мягкий режим). То есть клиент может получить дублирующее сообщение от бота.\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.304Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : false,    \"masked\" : true  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 566Host: localhost:8080{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.304Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : false,    \"masked\" : true  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: a26146a5-0858-45f8-b914-a1731ab50c42Vary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl-1 \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"questionId\" : 43,  \"receivedAt\" : \"2024-12-28T11:39:34.356Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0-1 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 542Host: localhost:8080{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"questionId\" : 43,  \"receivedAt\" : \"2024-12-28T11:39:34.356Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0-1 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: a88aedba-36e1-4f0a-9c52-e01b3455d024Vary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl-2 \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : { ,  \"sessionId\" : \"1\",  \"questionIndex\" : 3,  \"receivedAt\" : \"2024-12-28T11:39:34.383Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0-2 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 475Host: localhost:8080{  \"segmentationInfo\" : { ,  \"sessionId\" : \"1\",  \"questionIndex\" : 3,  \"receivedAt\" : \"2024-12-28T11:39:34.383Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0-2 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: 0e2b8474-c889-4355-9721-de3c180ba58dVary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl-3 \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : { ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.344Z\",  \"quickReplies\" : [ {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 1\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null  , {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 2\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SUCCESS\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0-3 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 614Host: localhost:8080{  \"segmentationInfo\" : { ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.344Z\",  \"quickReplies\" : [ {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 1\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null  , {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 2\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SUCCESS\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0-3 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: 236280d9-3e4d-41f8-a983-ca5c8a554144Vary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n",
    "text": "Title: Отправка ответов бота | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id\n\nMarkdown Content:\nОтправка ответов бота\n---------------------\n\nЭтот метод отправляет ответы, которые бот сможет использовать, отвечая на вопросы клиентов. После того как боту отправлено сообщение (вебхук `MESSAGE`), вам необходимо отправить ответ бота на это сообщение на POST эндпоинт `<threadsUrl/api/v1/chatbot`.\n\nСуществуют четыре типа ответов:\n\n*   По `threadsClientId` - Внутренний ID клиента, подходит и для авторизованных, и для неавторизованных клиентов. Этот тип предпочтителен для всех новых интеграций.\n\n*   По `questionId` - Используется, когда известен идентификатор конкретного вопроса.\n\n*   По `sessionId` и `questionIndex` - Используется, когда `questionID` вопроса неизвестен, и вам необходимо ответить на сообщение для того, чтобы выяснить индекс вопроса в треде.\n\n*   4. (**Устарело**) По `clientId` - Чаще используется для авторизованных клиентов, когда требуется написать клиенту; не имеет привязки к конкретному вопросу.\n\ninfo\n\nЕсли в ответе есть изображение, то для того, чтобы файл верно отображался клиенту, название изображения должно содержать расширение файла, либо же должен быть указан тип файла (например, image/jpg).\n\nwarning\n\nЕсли получено сообщение с типом `EMAIL`, на него необходимо отвечать по `sessionId` и `questionIndex`, т.к. у одного email адреса клиента может существовать несколько активных тредов, созданных по теме email, так что вам необходимо знать, в какой конкретно тред отправить сообщение.\n\nПоля тела запроса**Поле****Тип****Описание**\n`text`string Ответ бота на сообщение от клиента. Обязательный параметр, если не использован `formattedText`.\n`answerId`string Уникальный идентификатор ответа бота\n`formattedText`string (необязательно)Ответ бота на сообщение от клиента. В ответе может содержаться текст в разметке Markdown. Рекомендуется передать текстовое представление ответа в поле `text` для отображения в пользовательском интерфейсе.\n`clientId`string (необязательно, deprecated)Внешний ID клиента. **Этот параметр устарел, вместо него используйте `threadsClientId`.**\n`threadsClientId`long (необязательно)Внутренний ID клиента\n`sessionId`string (необязательно)Внутренний ID треда (ID чата клиента с агентом)\n`questionId`number (необязательно)Внутренний ID сообщения клиента\n`questionIndex`number (необязательно)Индекс сообщения клиента в треде (чате)\n`segmentationInfo`Map<String, String>Дополнительные параметры для сегментации (используется как в пользовательских, так и в преднастроенных сегментах). Параметр сегментации `personal_manager` доступен \"из коробки\". Если в этом параметре передан логин агента, а маршрут для сегмента с этим параметром настроен в системе, треды клиентов распределяются по соответствующему маршруту персональным менеджерам (агентам).\nattachments array (необязательно)Поля\n*   `url` - URL файла, строка до 4000 символов\n\n*   `name` - Название файла, строка до 1000 символов\n\n*   `type` - MIME-тип файла, строка до 256 символов\n`code`string Значения\n*   `UNCLEAR_QUESTION` - Вопрос не понятен боту, поэтому он переводит его человеку (т.е агенту).\n\n*   `SWITCH_TO_HUMAN` - Бот получил запрос на перевод диалога на человека (т.е агенту).\n\n*   `SUCCESS` - Бот успешно обработал сообщение клиента и отправил ответ.\n`userIds`set<long>(необязательно)Список идентификаторов агентов, на которых необходимо перевести тред после снятия его с текущего бота. Необходимо присылать в сочетании с кодом `SWITCH_TO_HUMAN`.\n`skillIds`set<long>(необязательно)Список идентификаторов навыков, которыми должны владеть агента, на которых необходимо перевести тред после снятия его с текущего бота. Необходимо присылать в сочетании с кодом `SWITCH_TO_HUMAN`.\n`unitIds`set<long>(необязательно)Список идентификаторов департаментов, на агентов из которых необходимо перевести тред после снятия его с текущего бота. Необходимо присылать в сочетании с кодом `SWITCH_TO_HUMAN`.\n`settings`Object (необязательно)Дополнительные настройки сообщения\n`settings.blockInput``boolean` (необязательно)Параметр, который указывает, заблокировано ли поле ввода сообщения (`true` - заблокировано, `false` - не заблокировано). Работает только для быстрых ответов.\n`settings.masked``boolean` (необязательно)Параметр, который указывает, замаскированы ли цифры в связанном сообщении клиента (`true` - замаскированы, `false` - не замаскированы).\n`quickReplies``array` (необязательно)*   `type` - Тип быстрого ответа. Возможные значения: `TEXT` для текстовых сообщений, `CONTACT` для получения данных о клиенте.\n\n*   `text` - Текст сообщения, строка до 4000 символов\n\n*   `shown_text` - Текстовое содержимое, необязательный параметр, строка до 2000 символов. Используется только в комбинации с параметром `text`. Если параметр указан, этот текст отправляется как клиентское сообщение после нажатия на кнопку быстрого ответа.\n\n*   `callback_data` - Текстовое содержимое, необязательный параметр, строка до 255 символов. Название события, которое будет передаваться, когда вызван JS SDK API для последующей обработки заказчиком на стороне сайта.\n\n*   `imageUrl` - URL иконки кнопки, строка до 4000 символов.\n\n*   `url` - Ссылка на прикрепленный файл, строка до 4000 символов.\n\nДлина и количество быстрых ответов настраивается в БД: `message.max-quick-replies`, `message.max-quick-reply-length`\n`quickRepliesHeaderFooter``Object` (необязательно)Дополнительные заголовок и подпись (только для Whatsapp)\n`quickRepliesHeaderFooter.header``array` (необязательно)*   `text` - Текст заголовка, максимальная длина 61 символ\n\n*   `imageUrl` - URL изображения\n\n*   `documentUrl` - URL файла\n\n*   `documentName` - Название файла\n\n*   `videoUrl` - URL видеофайла\n\nВ заголовке `header` можно передать параметры: текст заголовка, изображение, документ, видео. Отправить одновременно в заголовке и текст, и изображение, и документ, и видео нельзя.\n`quickRepliesHeaderFooter.footer``array` (необязательно)Поля\n*   `text` - Текст подписи, максимальная длина 61 символ\n`messageListPicker``Object` (необязательно)Интерактивный список (только для Whatsapp)\n`messageListPicker.header``Object` (необязательно)Поля\n*   `text` (string) - Текст заголовка, максимальная длина 60 символов\n`messageListPicker.footer``Object` (необязательно)Поля\n*   `text` (string) - Текст подписи, максимальная длина 60 символов\n`messageListPicker.title``string`Наименование кнопки для интерактивного списка, максимальная длина 20 символов\n`messageListPicker.sections`array (Максимум 10 элементов во всех `items`)Поля\n*   `title` (string) - Заголовок секции с элементами, который отображается пользователю, максимальная длина 24 символа\n\n*   `items` (array)\n`messageListPicker.section.items`array Поля\n*   `title` (string) - Название элемента, максимальная длина 24 символа\n\n*   `subTitle` (string (необязательно)) - Подзаголовок элемента, максимальная длина 72 символа\n\n*   `identifier` (string) – сквозной для всего сообщения ID элемента, вернется в ответном сообщении пользователя\n\nwarning\n\n`answerId` является уникальным значением. В случае повторного получения значение сообщение не будет доставлено клиенту. Если получен ответ на вопрос, для которого ранее уже был получен ответ бота, то в зависимости от настроек системы сообщение может быть: отклонено и доставка сообщения клиенту не будет выполнена (строгий режим) или отправка будет выполнена независимо от текста, отправляемого сообщения (мягкий режим). То есть клиент может получить дублирующее сообщение от бота.\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.304Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : false,    \"masked\" : true  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 566Host: localhost:8080{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.304Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : false,    \"masked\" : true  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: a26146a5-0858-45f8-b914-a1731ab50c42Vary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl-1 \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"questionId\" : 43,  \"receivedAt\" : \"2024-12-28T11:39:34.356Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0-1 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 542Host: localhost:8080{  \"segmentationInfo\" : {    \"key\" : \"value\"  ,  \"questionId\" : 43,  \"receivedAt\" : \"2024-12-28T11:39:34.356Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0-1 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: a88aedba-36e1-4f0a-9c52-e01b3455d024Vary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl-2 \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : { ,  \"sessionId\" : \"1\",  \"questionIndex\" : 3,  \"receivedAt\" : \"2024-12-28T11:39:34.383Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0-2 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 475Host: localhost:8080{  \"segmentationInfo\" : { ,  \"sessionId\" : \"1\",  \"questionIndex\" : 3,  \"receivedAt\" : \"2024-12-28T11:39:34.383Z\",  \"text\" : \"testPostAnswersByClientId\",  \"attachments\" : [ {    \"url\" : \"http://test...\",    \"name\" : \"testImage.png\",    \"type\" : \"image/jpeg\",    \"size\" : 256,    \"contentType\" : null,    \"fileId\" : null,    \"state\" : null,    \"errorCode\" : null,    \"errorMessage\" : null   ],  \"code\" : \"SWITCH_TO_HUMAN\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0-2 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: 0e2b8474-c889-4355-9721-de3c180ba58dVary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n\n### Пример curl[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-curl-3 \"Direct link to Пример curl\")\n\n`$ curl 'http://localhost:8080/api/v1/chatbot' -i -X POST \\    -H 'Content-Type: application/json' \\    -H 'Authorization: Bearer <token' \\    -H 'X-Tenant-Name: local' \\    -d '{  \"segmentationInfo\" : { ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.344Z\",  \"quickReplies\" : [ {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 1\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null  , {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 2\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SUCCESS\",  \"answerId\" : \"externalAnswerId\"'`\n\n### Пример HTTP запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-http-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0-3 \"Direct link to Пример HTTP запроса\")\n\n`POST /api/v1/chatbot HTTP/1.1Content-Type: application/jsonAuthorization: Bearer <tokenX-Tenant-Name: localContent-Length: 614Host: localhost:8080{  \"segmentationInfo\" : { ,  \"clientId\" : \"1\",  \"threadsClientId\" : 1,  \"receivedAt\" : \"2024-12-28T11:39:34.344Z\",  \"quickReplies\" : [ {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 1\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null  , {    \"type\" : \"TEXT\",    \"text\" : \"quick reply 2\",    \"imageUrl\" : null,    \"url\" : null,    \"shown_text\" : null,    \"callback_data\" : null,    \"payload\" : null   ],  \"settings\" : {    \"blockInput\" : true,    \"masked\" : false  ,  \"code\" : \"SUCCESS\",  \"answerId\" : \"externalAnswerId\"`\n\n### Пример успешного HTTP ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%BD%D0%BE%D0%B3%D0%BE-http-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0-3 \"Direct link to Пример успешного HTTP ответа\")\n\n`HTTP/1.1 200 OKX-Request-Id: 236280d9-3e4d-41f8-a983-ca5c8a554144Vary: OriginVary: Access-Control-Request-MethodVary: Access-Control-Request-HeadersX-Content-Type-Options: nosniffX-XSS-Protection: 0Cache-Control: no-cache, no-store, max-age=0, must-revalidatePragma: no-cacheExpires: 0X-Frame-Options: DENY`\n"
  }
}