{
  "html": "Title: Отправка исходящих сообщений от бота | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers\n\nMarkdown Content:\nОтправка исходящих сообщений от бота | edna Chat Center\n\n===============\n\n[Skip to main content](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#__docusaurus_skipToContent_fallback)\n\n[![Image 2: ed](http://docs-chatcenter.edna.ru/img/logo-cc.svg)](http://docs-chatcenter.edna.ru/)[Пользовательская документация](http://docs-chatcenter.edna.ru/docs/start/)[API](http://docs-chatcenter.edna.ru/docs/api/index)\n\n[История версий](http://docs-chatcenter.edna.ru/blog)\n\nЗапрос в поддержку\n\nctrl K\n\n[![Image 3: ed](http://docs-chatcenter.edna.ru/img/logo-cc.svg)](http://docs-chatcenter.edna.ru/)\n*   [Обратная совместимость API](http://docs-chatcenter.edna.ru/docs/api/index)\n*   [API edna Chat Center](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#) \n*   [API edna Bot Connect](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#) \n    *   [Введение](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/intro)\n    *   [Описание Bot API](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/description)\n    *   [Быстрый старт](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/start)\n    *   [Вебхук Init Chat](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-init-chat)\n    *   [Вебхук Message](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-message)\n    *   [Вебхук Training](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-training)\n    *   [Кастомизация данных клиента (clientData) в содержимом вебхука](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/client-data)\n    *   [Приветствие](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/greeting)\n    *   [Отправка ответов бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id)\n    *   [Подсказки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/hints)\n    *   [История сообщений](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/history)\n    *   [Закрытие треда ботом](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread)\n    *   [Закрытие треда ботом и комментарием от него](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread-with-comment)\n    *   [Создание нового треда с сообщением из рассылки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-thread)\n    *   [Вебхук Client contact provided](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-client-contact-provided)\n    *   [Создание нового клиента](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-client)\n    *   [Отправка исходящих сообщений от бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers)\n    *   [Вебхук Hints](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n    *   [Проставление тегов треду](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/add-tags-to-thread)\n    *   [Получение списка доступных тегов](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/get-list-tags)\n\n*   [](http://docs-chatcenter.edna.ru/)\n*   API edna Bot Connect\n*   Отправка исходящих сообщений от бота\n\nOn this page\n\nОтправка исходящих сообщений от бота\n====================================\n\nМетод `/api/v1/chatbot/outgoing` предназначен для отправки ботом исходящих сообщений клиенту и для передачи параметров маршрутизации тредов.\n\nПример запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Direct link to Пример запроса\")\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n`{  \"message\": {    \"text\": \"Привет! Это бот\"  },    \"client\": {    \"id\": \"3201234\",    \"channel\": {      \"channelType\": \"TELEGRAM\",      \"appMarker\": \"telegram\",      \"authorized\": true    }  },  \"routingParams\": {    \"userIds\": [1],    \"expiredAt\": \"2025-05-05T21:00:00Z\"  }}`\n\nПараметры запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Direct link to Параметры запроса\")\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n* * *\n\n### Параметры `Message`[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-message \"Direct link to параметры-message\")\n\n| Параметр | Тип данных | Характер | Описание |\n| --- | --- | --- | --- |\n| `Message` | object | Обязательный | Исходящее сообщение. |\n| `Message.text` | string | Обязательный, если не задан `formattedText` | Текст исходящего сообщения. |\n| `Message.formattedText` | string | Обязательный, если не задан `text` | Текст исходящего сообщения с поддержкой разметки Markdown. Приоритетнее параметра `text`. |\n| `Message.attachments` | array | Необязательный | Настройки вложения. Поля: - `url` — URL файла, строка до 4000 символов. - `name` — название файла, строка до 1000 символов. - `type` — MIME-тип файла, строка до 256 символов. |\n| `Message.quickReplies` | array | Необязательный | Настройки быстрого ответа. Поля: - `type` — тип быстрого ответа. Возможные значения: `TEXT` для текстовых сообщений, `CONTACT` для получения данных о клиенте. - `text` — текст сообщения, строка до 4000 символов. - `shown_text` — текстовое содержимое, необязательный параметр, строка до 2000 символов. Используется только в комбинации с параметром `text`. Если параметр указан, этот текст отправляется как клиентское сообщение после нажатия на кнопку быстрого ответа. - `callback_data` — текстовое содержимое, необязательный параметр, строка до 255 символов. Название события, которое будет передаваться, когда вызван JS SDK API для последующей обработки заказчиком на стороне сайта. - `imageUrl` — URL иконки кнопки, строка до 4000 символов. - `url` — ссылка на прикрепленный файл, строка до 4000 символов. Длина и количество быстрых ответов устанавливается в базе данных в настройках `message.max-quick-replies` и `message.max-quick-reply-length`. |\n| `Message.settings` | object | Необязательный | Дополнительные настройки исходящего сообщения. |\n| `Message.settings.blockInput` | boolean | Необязательный | Указывает на блокировку поля ввода сообщения: `true` — заблокировано, `false` — не заблокировано. Работает только для быстрых ответов. |\n| `Message.settings.masked` | boolean | Необязательный | Указывает на маскировку цифр в связанном сообщении клиента: `true` — замаскированы, `false` — не замаскированы. |\n\n### Параметры `Client`[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-client \"Direct link to параметры-client\")\n\n| Параметр | Тип данных | Характер | Описание |\n| --- | --- | --- | --- |\n| `Client` | object | Обязательный | Клиент, который получает сообщение. |\n| `Client.id` | string | Обязательный | Строковый идентификатор клиента. |\n| `Client.channel` | object | Обязательный | Канал для отправки сообщения. |\n| `Client.channel.appMarker` | string | Необязательный | Маркер канала. Должен быть задан, если проставлен у канала. |\n| `Client.channel.channelType` | string | Обязательный | Тип канала. |\n| `Client.channel.authorized` | boolean | Обязательный | Указывает на тип канала: `true` — авторизованный, `false` — неавторизованный. |\n\n### Параметры `RoutingParams`[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-routingparams \"Direct link to параметры-routingparams\")\n\n| Параметр | Тип данных | Характер | Описание |\n| --- | --- | --- | --- |\n| `RoutingParams` | object | Необязательный | Параметры маршрутизации тредов. |\n| `RoutingParams.userIds` | array | Обязательный, но не должны быть заданы `skillIds` и `unitIds` | Массив числовых идентификаторов агентов, на которых можно назначит тред. |\n| `RoutingParams.skillIds` | array | Обязательный, но не должны быть заданы `userIds` и `unitIds` | Массив числовых идентификаторов навыков, на которые можно назначить тред. |\n| `RoutingParams.unitIds` | array | Обязательный, но не должны быть заданы `skillIds` и `unitIds` | Массив числовых идентификаторов подразделений, на которые можно назначить тред. |\n| `RoutingParams.expiredAt` | datetime | Необязательный | Время истечения срока действия параметров маршрутизации, переданных в объекте `RoutingParams`. Если дата не задана, параметры маршрутизации будут действовать до тех пор, пока клиент не напишет новое сообщение. |\n| `RoutingParams.priority` | number | Необязательный | Приоритет следующего треда в маршрутизации. Чем меньше приоритет, тем быстрее тред будет распределен. По умолчанию у всех тредов приоритет равен 100. Чем меньше значение, тем раньше тред будет распределен на агента относительно других тредов. |\n\nПараметры ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0 \"Direct link to Параметры ответа\")\n----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n| Статус | Код | Когда возвращается |\n| --- | --- | --- |\n| `204 No content` | — | Если сообщение отправлено. |\n| `400 Bad request` | `application.errors.validation-error` | Если данные не прошли валидацию. |\n| `404 Not found` | `client-not-found` | Если клиент не найден по полю `Client.id`. |\n| `409 Conflict` | `client-already-has-open-thread` | Если у клиента в момент вызова есть открытый тред. |\n| `400 Bad request` | `routing-parameters-ambiguous` | Если в запросе указано два или три критерия маршрутизации, так как `routingParam` можно указывать только по одному критерию: `userIds`, `skillIds` или `unitIds`. |\n| `400 Bad request` | `message-has-no-content` | Если не задан хотя бы один из параметров `message-has-no-content`. |\n| `400 Bad request` | `client-blocked` | Если сообщение пытаются отправить заблокированному клиенту. |\n\n[Previous Создание нового клиента](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-client)[Next Вебхук Hints](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n\n*   [Пример запроса](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0)\n*   [Параметры запроса](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0)\n    *   [Параметры `Message`](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-message)\n    *   [Параметры `Client`](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-client)\n    *   [Параметры `RoutingParams`](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-routingparams)\n\n*   [Параметры ответа](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0)\n\n[![Image 4](http://docs-chatcenter.edna.ru/img/logo-footer.svg)](https://edna.ru/)\n\nCopyright © 2025 edna\n\nFeedback\n",
  "text": "Title: Отправка исходящих сообщений от бота | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers\n\nMarkdown Content:\nОтправка исходящих сообщений от бота | edna Chat Center\n\n===============\n\n[Skip to main content](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#__docusaurus_skipToContent_fallback)\n\n[![Image 2: ed](http://docs-chatcenter.edna.ru/img/logo-cc.svg)](http://docs-chatcenter.edna.ru/)[Пользовательская документация](http://docs-chatcenter.edna.ru/docs/start/)[API](http://docs-chatcenter.edna.ru/docs/api/index)\n\n[История версий](http://docs-chatcenter.edna.ru/blog)\n\nЗапрос в поддержку\n\nctrl K\n\n[![Image 3: ed](http://docs-chatcenter.edna.ru/img/logo-cc.svg)](http://docs-chatcenter.edna.ru/)\n*   [Обратная совместимость API](http://docs-chatcenter.edna.ru/docs/api/index)\n*   [API edna Chat Center](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#) \n*   [API edna Bot Connect](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#) \n    *   [Введение](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/intro)\n    *   [Описание Bot API](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/description)\n    *   [Быстрый старт](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/start)\n    *   [Вебхук Init Chat](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-init-chat)\n    *   [Вебхук Message](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-message)\n    *   [Вебхук Training](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-training)\n    *   [Кастомизация данных клиента (clientData) в содержимом вебхука](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/client-data)\n    *   [Приветствие](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/greeting)\n    *   [Отправка ответов бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id)\n    *   [Подсказки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/hints)\n    *   [История сообщений](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/history)\n    *   [Закрытие треда ботом](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread)\n    *   [Закрытие треда ботом и комментарием от него](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread-with-comment)\n    *   [Создание нового треда с сообщением из рассылки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-thread)\n    *   [Вебхук Client contact provided](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-client-contact-provided)\n    *   [Создание нового клиента](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-client)\n    *   [Отправка исходящих сообщений от бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers)\n    *   [Вебхук Hints](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n    *   [Проставление тегов треду](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/add-tags-to-thread)\n    *   [Получение списка доступных тегов](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/get-list-tags)\n\n*   [](http://docs-chatcenter.edna.ru/)\n*   API edna Bot Connect\n*   Отправка исходящих сообщений от бота\n\nOn this page\n\nОтправка исходящих сообщений от бота\n====================================\n\nМетод `/api/v1/chatbot/outgoing` предназначен для отправки ботом исходящих сообщений клиенту и для передачи параметров маршрутизации тредов.\n\nПример запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Direct link to Пример запроса\")\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n`{  \"message\": {    \"text\": \"Привет! Это бот\"  },    \"client\": {    \"id\": \"3201234\",    \"channel\": {      \"channelType\": \"TELEGRAM\",      \"appMarker\": \"telegram\",      \"authorized\": true    }  },  \"routingParams\": {    \"userIds\": [1],    \"expiredAt\": \"2025-05-05T21:00:00Z\"  }}`\n\nПараметры запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Direct link to Параметры запроса\")\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n* * *\n\n### Параметры `Message`[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-message \"Direct link to параметры-message\")\n\n| Параметр | Тип данных | Характер | Описание |\n| --- | --- | --- | --- |\n| `Message` | object | Обязательный | Исходящее сообщение. |\n| `Message.text` | string | Обязательный, если не задан `formattedText` | Текст исходящего сообщения. |\n| `Message.formattedText` | string | Обязательный, если не задан `text` | Текст исходящего сообщения с поддержкой разметки Markdown. Приоритетнее параметра `text`. |\n| `Message.attachments` | array | Необязательный | Настройки вложения. Поля: - `url` — URL файла, строка до 4000 символов. - `name` — название файла, строка до 1000 символов. - `type` — MIME-тип файла, строка до 256 символов. |\n| `Message.quickReplies` | array | Необязательный | Настройки быстрого ответа. Поля: - `type` — тип быстрого ответа. Возможные значения: `TEXT` для текстовых сообщений, `CONTACT` для получения данных о клиенте. - `text` — текст сообщения, строка до 4000 символов. - `shown_text` — текстовое содержимое, необязательный параметр, строка до 2000 символов. Используется только в комбинации с параметром `text`. Если параметр указан, этот текст отправляется как клиентское сообщение после нажатия на кнопку быстрого ответа. - `callback_data` — текстовое содержимое, необязательный параметр, строка до 255 символов. Название события, которое будет передаваться, когда вызван JS SDK API для последующей обработки заказчиком на стороне сайта. - `imageUrl` — URL иконки кнопки, строка до 4000 символов. - `url` — ссылка на прикрепленный файл, строка до 4000 символов. Длина и количество быстрых ответов устанавливается в базе данных в настройках `message.max-quick-replies` и `message.max-quick-reply-length`. |\n| `Message.settings` | object | Необязательный | Дополнительные настройки исходящего сообщения. |\n| `Message.settings.blockInput` | boolean | Необязательный | Указывает на блокировку поля ввода сообщения: `true` — заблокировано, `false` — не заблокировано. Работает только для быстрых ответов. |\n| `Message.settings.masked` | boolean | Необязательный | Указывает на маскировку цифр в связанном сообщении клиента: `true` — замаскированы, `false` — не замаскированы. |\n\n### Параметры `Client`[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-client \"Direct link to параметры-client\")\n\n| Параметр | Тип данных | Характер | Описание |\n| --- | --- | --- | --- |\n| `Client` | object | Обязательный | Клиент, который получает сообщение. |\n| `Client.id` | string | Обязательный | Строковый идентификатор клиента. |\n| `Client.channel` | object | Обязательный | Канал для отправки сообщения. |\n| `Client.channel.appMarker` | string | Необязательный | Маркер канала. Должен быть задан, если проставлен у канала. |\n| `Client.channel.channelType` | string | Обязательный | Тип канала. |\n| `Client.channel.authorized` | boolean | Обязательный | Указывает на тип канала: `true` — авторизованный, `false` — неавторизованный. |\n\n### Параметры `RoutingParams`[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-routingparams \"Direct link to параметры-routingparams\")\n\n| Параметр | Тип данных | Характер | Описание |\n| --- | --- | --- | --- |\n| `RoutingParams` | object | Необязательный | Параметры маршрутизации тредов. |\n| `RoutingParams.userIds` | array | Обязательный, но не должны быть заданы `skillIds` и `unitIds` | Массив числовых идентификаторов агентов, на которых можно назначит тред. |\n| `RoutingParams.skillIds` | array | Обязательный, но не должны быть заданы `userIds` и `unitIds` | Массив числовых идентификаторов навыков, на которые можно назначить тред. |\n| `RoutingParams.unitIds` | array | Обязательный, но не должны быть заданы `skillIds` и `unitIds` | Массив числовых идентификаторов подразделений, на которые можно назначить тред. |\n| `RoutingParams.expiredAt` | datetime | Необязательный | Время истечения срока действия параметров маршрутизации, переданных в объекте `RoutingParams`. Если дата не задана, параметры маршрутизации будут действовать до тех пор, пока клиент не напишет новое сообщение. |\n| `RoutingParams.priority` | number | Необязательный | Приоритет следующего треда в маршрутизации. Чем меньше приоритет, тем быстрее тред будет распределен. По умолчанию у всех тредов приоритет равен 100. Чем меньше значение, тем раньше тред будет распределен на агента относительно других тредов. |\n\nПараметры ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0 \"Direct link to Параметры ответа\")\n----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n| Статус | Код | Когда возвращается |\n| --- | --- | --- |\n| `204 No content` | — | Если сообщение отправлено. |\n| `400 Bad request` | `application.errors.validation-error` | Если данные не прошли валидацию. |\n| `404 Not found` | `client-not-found` | Если клиент не найден по полю `Client.id`. |\n| `409 Conflict` | `client-already-has-open-thread` | Если у клиента в момент вызова есть открытый тред. |\n| `400 Bad request` | `routing-parameters-ambiguous` | Если в запросе указано два или три критерия маршрутизации, так как `routingParam` можно указывать только по одному критерию: `userIds`, `skillIds` или `unitIds`. |\n| `400 Bad request` | `message-has-no-content` | Если не задан хотя бы один из параметров `message-has-no-content`. |\n| `400 Bad request` | `client-blocked` | Если сообщение пытаются отправить заблокированному клиенту. |\n\n[Previous Создание нового клиента](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-client)[Next Вебхук Hints](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n\n*   [Пример запроса](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0)\n*   [Параметры запроса](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0)\n    *   [Параметры `Message`](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-message)\n    *   [Параметры `Client`](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-client)\n    *   [Параметры `RoutingParams`](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-routingparams)\n\n*   [Параметры ответа](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0)\n\n[![Image 4](http://docs-chatcenter.edna.ru/img/logo-footer.svg)](https://edna.ru/)\n\nCopyright © 2025 edna\n\nFeedback\n",
  "metadata": {
    "url": "https://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers",
    "content_hash": "2a792453c3a5c75cebe92d13deb8579ad69bac23fafbeea854f04f3979e10233",
    "last_modified": "2025-09-19T09:26:45.962737+00:00",
    "etag": null,
    "title": null,
    "page_type": "api",
    "content_length": 12016,
    "cached_at": "2025-09-19T09:26:45.962737+00:00",
    "html": "Title: Отправка исходящих сообщений от бота | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers\n\nMarkdown Content:\nОтправка исходящих сообщений от бота | edna Chat Center\n\n===============\n\n[Skip to main content](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#__docusaurus_skipToContent_fallback)\n\n[![Image 2: ed](http://docs-chatcenter.edna.ru/img/logo-cc.svg)](http://docs-chatcenter.edna.ru/)[Пользовательская документация](http://docs-chatcenter.edna.ru/docs/start/)[API](http://docs-chatcenter.edna.ru/docs/api/index)\n\n[История версий](http://docs-chatcenter.edna.ru/blog)\n\nЗапрос в поддержку\n\nctrl K\n\n[![Image 3: ed](http://docs-chatcenter.edna.ru/img/logo-cc.svg)](http://docs-chatcenter.edna.ru/)\n*   [Обратная совместимость API](http://docs-chatcenter.edna.ru/docs/api/index)\n*   [API edna Chat Center](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#) \n*   [API edna Bot Connect](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#) \n    *   [Введение](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/intro)\n    *   [Описание Bot API](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/description)\n    *   [Быстрый старт](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/start)\n    *   [Вебхук Init Chat](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-init-chat)\n    *   [Вебхук Message](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-message)\n    *   [Вебхук Training](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-training)\n    *   [Кастомизация данных клиента (clientData) в содержимом вебхука](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/client-data)\n    *   [Приветствие](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/greeting)\n    *   [Отправка ответов бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id)\n    *   [Подсказки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/hints)\n    *   [История сообщений](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/history)\n    *   [Закрытие треда ботом](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread)\n    *   [Закрытие треда ботом и комментарием от него](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread-with-comment)\n    *   [Создание нового треда с сообщением из рассылки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-thread)\n    *   [Вебхук Client contact provided](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-client-contact-provided)\n    *   [Создание нового клиента](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-client)\n    *   [Отправка исходящих сообщений от бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers)\n    *   [Вебхук Hints](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n    *   [Проставление тегов треду](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/add-tags-to-thread)\n    *   [Получение списка доступных тегов](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/get-list-tags)\n\n*   [](http://docs-chatcenter.edna.ru/)\n*   API edna Bot Connect\n*   Отправка исходящих сообщений от бота\n\nOn this page\n\nОтправка исходящих сообщений от бота\n====================================\n\nМетод `/api/v1/chatbot/outgoing` предназначен для отправки ботом исходящих сообщений клиенту и для передачи параметров маршрутизации тредов.\n\nПример запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Direct link to Пример запроса\")\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n`{  \"message\": {    \"text\": \"Привет! Это бот\"  },    \"client\": {    \"id\": \"3201234\",    \"channel\": {      \"channelType\": \"TELEGRAM\",      \"appMarker\": \"telegram\",      \"authorized\": true    }  },  \"routingParams\": {    \"userIds\": [1],    \"expiredAt\": \"2025-05-05T21:00:00Z\"  }}`\n\nПараметры запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Direct link to Параметры запроса\")\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n* * *\n\n### Параметры `Message`[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-message \"Direct link to параметры-message\")\n\n| Параметр | Тип данных | Характер | Описание |\n| --- | --- | --- | --- |\n| `Message` | object | Обязательный | Исходящее сообщение. |\n| `Message.text` | string | Обязательный, если не задан `formattedText` | Текст исходящего сообщения. |\n| `Message.formattedText` | string | Обязательный, если не задан `text` | Текст исходящего сообщения с поддержкой разметки Markdown. Приоритетнее параметра `text`. |\n| `Message.attachments` | array | Необязательный | Настройки вложения. Поля: - `url` — URL файла, строка до 4000 символов. - `name` — название файла, строка до 1000 символов. - `type` — MIME-тип файла, строка до 256 символов. |\n| `Message.quickReplies` | array | Необязательный | Настройки быстрого ответа. Поля: - `type` — тип быстрого ответа. Возможные значения: `TEXT` для текстовых сообщений, `CONTACT` для получения данных о клиенте. - `text` — текст сообщения, строка до 4000 символов. - `shown_text` — текстовое содержимое, необязательный параметр, строка до 2000 символов. Используется только в комбинации с параметром `text`. Если параметр указан, этот текст отправляется как клиентское сообщение после нажатия на кнопку быстрого ответа. - `callback_data` — текстовое содержимое, необязательный параметр, строка до 255 символов. Название события, которое будет передаваться, когда вызван JS SDK API для последующей обработки заказчиком на стороне сайта. - `imageUrl` — URL иконки кнопки, строка до 4000 символов. - `url` — ссылка на прикрепленный файл, строка до 4000 символов. Длина и количество быстрых ответов устанавливается в базе данных в настройках `message.max-quick-replies` и `message.max-quick-reply-length`. |\n| `Message.settings` | object | Необязательный | Дополнительные настройки исходящего сообщения. |\n| `Message.settings.blockInput` | boolean | Необязательный | Указывает на блокировку поля ввода сообщения: `true` — заблокировано, `false` — не заблокировано. Работает только для быстрых ответов. |\n| `Message.settings.masked` | boolean | Необязательный | Указывает на маскировку цифр в связанном сообщении клиента: `true` — замаскированы, `false` — не замаскированы. |\n\n### Параметры `Client`[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-client \"Direct link to параметры-client\")\n\n| Параметр | Тип данных | Характер | Описание |\n| --- | --- | --- | --- |\n| `Client` | object | Обязательный | Клиент, который получает сообщение. |\n| `Client.id` | string | Обязательный | Строковый идентификатор клиента. |\n| `Client.channel` | object | Обязательный | Канал для отправки сообщения. |\n| `Client.channel.appMarker` | string | Необязательный | Маркер канала. Должен быть задан, если проставлен у канала. |\n| `Client.channel.channelType` | string | Обязательный | Тип канала. |\n| `Client.channel.authorized` | boolean | Обязательный | Указывает на тип канала: `true` — авторизованный, `false` — неавторизованный. |\n\n### Параметры `RoutingParams`[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-routingparams \"Direct link to параметры-routingparams\")\n\n| Параметр | Тип данных | Характер | Описание |\n| --- | --- | --- | --- |\n| `RoutingParams` | object | Необязательный | Параметры маршрутизации тредов. |\n| `RoutingParams.userIds` | array | Обязательный, но не должны быть заданы `skillIds` и `unitIds` | Массив числовых идентификаторов агентов, на которых можно назначит тред. |\n| `RoutingParams.skillIds` | array | Обязательный, но не должны быть заданы `userIds` и `unitIds` | Массив числовых идентификаторов навыков, на которые можно назначить тред. |\n| `RoutingParams.unitIds` | array | Обязательный, но не должны быть заданы `skillIds` и `unitIds` | Массив числовых идентификаторов подразделений, на которые можно назначить тред. |\n| `RoutingParams.expiredAt` | datetime | Необязательный | Время истечения срока действия параметров маршрутизации, переданных в объекте `RoutingParams`. Если дата не задана, параметры маршрутизации будут действовать до тех пор, пока клиент не напишет новое сообщение. |\n| `RoutingParams.priority` | number | Необязательный | Приоритет следующего треда в маршрутизации. Чем меньше приоритет, тем быстрее тред будет распределен. По умолчанию у всех тредов приоритет равен 100. Чем меньше значение, тем раньше тред будет распределен на агента относительно других тредов. |\n\nПараметры ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0 \"Direct link to Параметры ответа\")\n----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n| Статус | Код | Когда возвращается |\n| --- | --- | --- |\n| `204 No content` | — | Если сообщение отправлено. |\n| `400 Bad request` | `application.errors.validation-error` | Если данные не прошли валидацию. |\n| `404 Not found` | `client-not-found` | Если клиент не найден по полю `Client.id`. |\n| `409 Conflict` | `client-already-has-open-thread` | Если у клиента в момент вызова есть открытый тред. |\n| `400 Bad request` | `routing-parameters-ambiguous` | Если в запросе указано два или три критерия маршрутизации, так как `routingParam` можно указывать только по одному критерию: `userIds`, `skillIds` или `unitIds`. |\n| `400 Bad request` | `message-has-no-content` | Если не задан хотя бы один из параметров `message-has-no-content`. |\n| `400 Bad request` | `client-blocked` | Если сообщение пытаются отправить заблокированному клиенту. |\n\n[Previous Создание нового клиента](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-client)[Next Вебхук Hints](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n\n*   [Пример запроса](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0)\n*   [Параметры запроса](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0)\n    *   [Параметры `Message`](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-message)\n    *   [Параметры `Client`](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-client)\n    *   [Параметры `RoutingParams`](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-routingparams)\n\n*   [Параметры ответа](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0)\n\n[![Image 4](http://docs-chatcenter.edna.ru/img/logo-footer.svg)](https://edna.ru/)\n\nCopyright © 2025 edna\n\nFeedback\n",
    "text": "Title: Отправка исходящих сообщений от бота | edna Chat Center\n\nURL Source: http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers\n\nMarkdown Content:\nОтправка исходящих сообщений от бота | edna Chat Center\n\n===============\n\n[Skip to main content](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#__docusaurus_skipToContent_fallback)\n\n[![Image 2: ed](http://docs-chatcenter.edna.ru/img/logo-cc.svg)](http://docs-chatcenter.edna.ru/)[Пользовательская документация](http://docs-chatcenter.edna.ru/docs/start/)[API](http://docs-chatcenter.edna.ru/docs/api/index)\n\n[История версий](http://docs-chatcenter.edna.ru/blog)\n\nЗапрос в поддержку\n\nctrl K\n\n[![Image 3: ed](http://docs-chatcenter.edna.ru/img/logo-cc.svg)](http://docs-chatcenter.edna.ru/)\n*   [Обратная совместимость API](http://docs-chatcenter.edna.ru/docs/api/index)\n*   [API edna Chat Center](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#) \n*   [API edna Bot Connect](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#) \n    *   [Введение](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/intro)\n    *   [Описание Bot API](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/description)\n    *   [Быстрый старт](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/start)\n    *   [Вебхук Init Chat](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-init-chat)\n    *   [Вебхук Message](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-message)\n    *   [Вебхук Training](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-training)\n    *   [Кастомизация данных клиента (clientData) в содержимом вебхука](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/client-data)\n    *   [Приветствие](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/greeting)\n    *   [Отправка ответов бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/post-answers-by-client-id)\n    *   [Подсказки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/hints)\n    *   [История сообщений](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/history)\n    *   [Закрытие треда ботом](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread)\n    *   [Закрытие треда ботом и комментарием от него](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/close-thread-with-comment)\n    *   [Создание нового треда с сообщением из рассылки](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-thread)\n    *   [Вебхук Client contact provided](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-client-contact-provided)\n    *   [Создание нового клиента](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-client)\n    *   [Отправка исходящих сообщений от бота](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers)\n    *   [Вебхук Hints](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n    *   [Проставление тегов треду](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/add-tags-to-thread)\n    *   [Получение списка доступных тегов](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/get-list-tags)\n\n*   [](http://docs-chatcenter.edna.ru/)\n*   API edna Bot Connect\n*   Отправка исходящих сообщений от бота\n\nOn this page\n\nОтправка исходящих сообщений от бота\n====================================\n\nМетод `/api/v1/chatbot/outgoing` предназначен для отправки ботом исходящих сообщений клиенту и для передачи параметров маршрутизации тредов.\n\nПример запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Direct link to Пример запроса\")\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n`{  \"message\": {    \"text\": \"Привет! Это бот\"  },    \"client\": {    \"id\": \"3201234\",    \"channel\": {      \"channelType\": \"TELEGRAM\",      \"appMarker\": \"telegram\",      \"authorized\": true    }  },  \"routingParams\": {    \"userIds\": [1],    \"expiredAt\": \"2025-05-05T21:00:00Z\"  }}`\n\nПараметры запроса[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0 \"Direct link to Параметры запроса\")\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n* * *\n\n### Параметры `Message`[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-message \"Direct link to параметры-message\")\n\n| Параметр | Тип данных | Характер | Описание |\n| --- | --- | --- | --- |\n| `Message` | object | Обязательный | Исходящее сообщение. |\n| `Message.text` | string | Обязательный, если не задан `formattedText` | Текст исходящего сообщения. |\n| `Message.formattedText` | string | Обязательный, если не задан `text` | Текст исходящего сообщения с поддержкой разметки Markdown. Приоритетнее параметра `text`. |\n| `Message.attachments` | array | Необязательный | Настройки вложения. Поля: - `url` — URL файла, строка до 4000 символов. - `name` — название файла, строка до 1000 символов. - `type` — MIME-тип файла, строка до 256 символов. |\n| `Message.quickReplies` | array | Необязательный | Настройки быстрого ответа. Поля: - `type` — тип быстрого ответа. Возможные значения: `TEXT` для текстовых сообщений, `CONTACT` для получения данных о клиенте. - `text` — текст сообщения, строка до 4000 символов. - `shown_text` — текстовое содержимое, необязательный параметр, строка до 2000 символов. Используется только в комбинации с параметром `text`. Если параметр указан, этот текст отправляется как клиентское сообщение после нажатия на кнопку быстрого ответа. - `callback_data` — текстовое содержимое, необязательный параметр, строка до 255 символов. Название события, которое будет передаваться, когда вызван JS SDK API для последующей обработки заказчиком на стороне сайта. - `imageUrl` — URL иконки кнопки, строка до 4000 символов. - `url` — ссылка на прикрепленный файл, строка до 4000 символов. Длина и количество быстрых ответов устанавливается в базе данных в настройках `message.max-quick-replies` и `message.max-quick-reply-length`. |\n| `Message.settings` | object | Необязательный | Дополнительные настройки исходящего сообщения. |\n| `Message.settings.blockInput` | boolean | Необязательный | Указывает на блокировку поля ввода сообщения: `true` — заблокировано, `false` — не заблокировано. Работает только для быстрых ответов. |\n| `Message.settings.masked` | boolean | Необязательный | Указывает на маскировку цифр в связанном сообщении клиента: `true` — замаскированы, `false` — не замаскированы. |\n\n### Параметры `Client`[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-client \"Direct link to параметры-client\")\n\n| Параметр | Тип данных | Характер | Описание |\n| --- | --- | --- | --- |\n| `Client` | object | Обязательный | Клиент, который получает сообщение. |\n| `Client.id` | string | Обязательный | Строковый идентификатор клиента. |\n| `Client.channel` | object | Обязательный | Канал для отправки сообщения. |\n| `Client.channel.appMarker` | string | Необязательный | Маркер канала. Должен быть задан, если проставлен у канала. |\n| `Client.channel.channelType` | string | Обязательный | Тип канала. |\n| `Client.channel.authorized` | boolean | Обязательный | Указывает на тип канала: `true` — авторизованный, `false` — неавторизованный. |\n\n### Параметры `RoutingParams`[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-routingparams \"Direct link to параметры-routingparams\")\n\n| Параметр | Тип данных | Характер | Описание |\n| --- | --- | --- | --- |\n| `RoutingParams` | object | Необязательный | Параметры маршрутизации тредов. |\n| `RoutingParams.userIds` | array | Обязательный, но не должны быть заданы `skillIds` и `unitIds` | Массив числовых идентификаторов агентов, на которых можно назначит тред. |\n| `RoutingParams.skillIds` | array | Обязательный, но не должны быть заданы `userIds` и `unitIds` | Массив числовых идентификаторов навыков, на которые можно назначить тред. |\n| `RoutingParams.unitIds` | array | Обязательный, но не должны быть заданы `skillIds` и `unitIds` | Массив числовых идентификаторов подразделений, на которые можно назначить тред. |\n| `RoutingParams.expiredAt` | datetime | Необязательный | Время истечения срока действия параметров маршрутизации, переданных в объекте `RoutingParams`. Если дата не задана, параметры маршрутизации будут действовать до тех пор, пока клиент не напишет новое сообщение. |\n| `RoutingParams.priority` | number | Необязательный | Приоритет следующего треда в маршрутизации. Чем меньше приоритет, тем быстрее тред будет распределен. По умолчанию у всех тредов приоритет равен 100. Чем меньше значение, тем раньше тред будет распределен на агента относительно других тредов. |\n\nПараметры ответа[​](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0 \"Direct link to Параметры ответа\")\n----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n| Статус | Код | Когда возвращается |\n| --- | --- | --- |\n| `204 No content` | — | Если сообщение отправлено. |\n| `400 Bad request` | `application.errors.validation-error` | Если данные не прошли валидацию. |\n| `404 Not found` | `client-not-found` | Если клиент не найден по полю `Client.id`. |\n| `409 Conflict` | `client-already-has-open-thread` | Если у клиента в момент вызова есть открытый тред. |\n| `400 Bad request` | `routing-parameters-ambiguous` | Если в запросе указано два или три критерия маршрутизации, так как `routingParam` можно указывать только по одному критерию: `userIds`, `skillIds` или `unitIds`. |\n| `400 Bad request` | `message-has-no-content` | Если не задан хотя бы один из параметров `message-has-no-content`. |\n| `400 Bad request` | `client-blocked` | Если сообщение пытаются отправить заблокированному клиенту. |\n\n[Previous Создание нового клиента](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/create-new-client)[Next Вебхук Hints](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/webhook-hints)\n\n*   [Пример запроса](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0)\n*   [Параметры запроса](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0)\n    *   [Параметры `Message`](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-message)\n    *   [Параметры `Client`](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-client)\n    *   [Параметры `RoutingParams`](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-routingparams)\n\n*   [Параметры ответа](http://docs-chatcenter.edna.ru/docs/api/external-api-bot/send-bot-answers#%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0)\n\n[![Image 4](http://docs-chatcenter.edna.ru/img/logo-footer.svg)](https://edna.ru/)\n\nCopyright © 2025 edna\n\nFeedback\n"
  }
}